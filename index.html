<!DOCTYPE html>
<html lang="en"> 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIBZ | Barber Website Funnel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        /* ========== Root & General Styles ========== */
        :root {
            --primary: #FF6B00;
            --dark: #121212;
            --light: #ffffff;
            --gray: #4a4a4a;
            --light-gray: #f9f9f9;
            --border: #eeeeee;
            --transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family:'Inter',sans-serif; background-color:var(--light); color:var(--dark); line-height:1.6; overflow-x:hidden; scroll-behavior:smooth; }
        h1,h2,h3,h4,h5 { font-weight:900; line-height:1.1; letter-spacing:-1px; }

        .container { width:100%; max-width:1200px; margin:0 auto; padding:0 30px; }

        /* ========== Header ========== */
        header { position:fixed; top:0; left:0; width:100%; z-index:1000; padding:20px 0; transition:var(--transition); background:rgba(255,255,255,0.95); backdrop-filter:blur(10px); border-bottom:1px solid var(--border); }
        .nav-container { display:flex; justify-content:space-between; align-items:center; }
        .logo { font-size:28px; font-weight:900; color:var(--primary); text-decoration:none; letter-spacing:-1px; }
        .logo::after { content:"."; color:#000; margin-left:2px; font-weight:900; }
        .nav-links { display:flex; gap:40px; }
        .nav-links a { color:var(--dark); text-decoration:none; font-weight:600; font-size:16px; position:relative; transition:var(--transition); }
        .nav-links a:hover { color:var(--primary); }
        .mobile-menu-btn { display:none; background:none; border:none; color:var(--dark); font-size:24px; cursor:pointer; }

        /* ========== SEARCH BAR SECTION ========== */
        .search-bar-section {
            padding: 80px 0 40px;
            background: white;
            text-align: center;
        }

        .search-bar-section h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            letter-spacing: -1px;
        }

        .search-bar-section p {
            font-size: 1.2rem;
            color: var(--gray);
            max-width: 600px;
            margin: 0 auto 2.5rem;
            line-height: 1.6;
        }

        .search-container {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
        }

        .search-row {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .search-row input {
            flex: 1;
            min-width: 200px;
            padding: 1.2rem 1.5rem;
            border-radius: 12px;
            border: 2px solid var(--border);
            background: white;
            color: var(--dark);
            font-size: 1rem;
            outline: none;
            transition: var(--transition);
        }

        .search-row input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(255, 107, 0, 0.1);
        }

        /* Search suggestions dropdown */
        .search-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid var(--border);
            border-top: none;
            border-radius: 0 0 12px 12px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 100;
            display: none;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .suggestion-item {
            padding: 1rem 1.5rem;
            cursor: pointer;
            border-bottom: 1px solid var(--border);
            transition: var(--transition);
            font-weight: 500;
            color: var(--dark);
            text-align: left;
        }

        .suggestion-item:hover {
            background: rgba(255, 107, 0, 0.05);
            color: var(--primary);
        }

        .suggestion-item:last-child {
            border-bottom: none;
        }

        .info-item {
            color: var(--gray);
            font-style: italic;
            cursor: default;
        }

        .info-item:hover {
            background: transparent;
            color: var(--gray);
        }

        /* ========== Funnel Section ========== */
        .funnel-section { min-height:100vh; padding-top:150px; padding-bottom:60px; display:flex; justify-content:center; align-items:center; text-align:center; background:radial-gradient(circle at top right, #fff5ee, #ffffff); }

        .form-screen { width:100%; max-width:800px; margin:0 auto; display:none; opacity:0; transition:opacity 0.5s ease; }
        .form-screen.active { display:block; opacity:1; animation:fadeIn 0.5s ease forwards; }
        .form-screen h2 { font-size:3rem; margin-bottom:1.5rem; letter-spacing:-1px; }
        .form-screen p { font-size:1.2rem; color:var(--gray); max-width:600px; margin:0 auto 2rem; line-height:1.6; }

        /* ========== Buttons ========== */
        .vibz-btn { background-color:transparent; color:var(--primary); border:2px solid var(--primary); border-radius:12px; font-weight:700; padding:1.2rem 2.5rem; font-size:1.1rem; cursor:pointer; transition:var(--transition); text-decoration:none; display:inline-block; margin:0.5rem; min-width:200px; }
        .vibz-btn:hover { background:var(--primary); color:white; transform:scale(1.05); box-shadow:0 15px 30px rgba(255,107,0,0.2); }
        .vibz-btn-primary { background:var(--primary); color:white; border:2px solid var(--primary); }
        .vibz-btn-primary:hover { background:white; color:var(--primary); }
        .back-button { background-color:var(--light-gray); color:var(--gray); border:2px solid var(--border); margin-top:2rem; }
        .back-button:hover { background-color:var(--border); color:var(--dark); transform:scale(1.02); box-shadow:0 10px 20px rgba(0,0,0,0.1); }

        /* ========== Search & Categories ========== */
        .search-row { display:flex; gap:15px; justify-content:center; flex-wrap:wrap; margin-bottom:3rem; max-width:600px; margin-left:auto; margin-right:auto; }
        .search-row input { flex:1; min-width:200px; padding:1.2rem 1.5rem; border-radius:12px; border:2px solid var(--border); background:white; color:var(--dark); font-size:1rem; outline:none; transition:var(--transition); }
        .search-row input:focus { border-color:var(--primary); box-shadow:0 0 0 3px rgba(255,107,0,0.1); }
        .categories-row { display:flex; flex-wrap:wrap; gap:15px; justify-content:center; max-width:800px; margin:0 auto 3rem; }

        /* ========== Step Indicator ========== */
        .step-indicator { display:flex; justify-content:center; gap:10px; margin-bottom:3rem; }
        .step-dot { width:10px; height:10px; border-radius:50%; background:var(--border); transition:var(--transition); }
        .step-dot.active { background:var(--primary); transform:scale(1.2); }

        /* ========== Pricing Cards ========== */
        .pricing-container { display:grid; grid-template-columns:repeat(auto-fit, minmax(280px,1fr)); gap:30px; margin-top:40px; }
        .pricing-card { padding:3rem 2.5rem; background:var(--light-gray); border-radius:32px; position:relative; overflow:hidden; transition:var(--transition); border:1px solid transparent; }
        .pricing-card:hover { background:white; border-color:var(--primary); transform:translateY(-10px); box-shadow:0 30px 60px rgba(0,0,0,0.05); }
        .pricing-card h3 { font-size:1.8rem; margin-bottom:1rem; color:var(--dark); }
        .price { font-size:3rem; font-weight:900; color:var(--primary); margin:1.5rem 0; display:block; }
        .price-period { font-size:1rem; color:var(--gray); font-weight:normal; }
        .pricing-features { list-style:none; text-align:left; margin:2rem 0; }
        .pricing-features li { margin-bottom:1rem; padding-left:30px; position:relative; }
        .pricing-features li:before { content:"✓"; position:absolute; left:0; color:var(--primary); font-weight:bold; }

        /* Success message */
        .success-message { background:var(--light-gray); padding:3rem; border-radius:32px; margin-top:2rem; border:1px solid var(--border); }
        .success-message h3 { color:var(--primary); margin-bottom:1rem; }

        /* ========== Step 1 input styling ========== */
        #step-1 input[type="text"] {
            width: 100%;
            padding: 1rem 1.2rem;
            font-size: 1rem;
            border: 2px solid var(--gray);
            border-radius: 0.5rem;
            margin-bottom: 1.5rem;
            box-sizing: border-box;
        }

        /* Optional: focus effect */
        #step-1 input[type="text"]:focus {
            border-color: var(--primary);
            outline: none;
        }

        /* Feature button selection styles */
        .vibz-btn.selected {
            background-color: #FF6B00 !important;
            color: white !important;
            border-color: #FF6B00 !important;
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(255, 107, 0, 0.2);
        }

        /* Step indicator for direct jumps */
        .step-dot.jump-point {
            background-color: #FF6B00;
            transform: scale(1.3);
            box-shadow: 0 0 0 3px rgba(255, 107, 0, 0.3);
        }

        /* Design info box */
        .design-info-box {
            animation: fadeIn 0.5s ease;
        }

        /* ========== Step 4: Code Input & Concept Display ========== */
        .code-input-container {
            max-width: 500px;
            margin: 0 auto 3rem;
        }

        .code-input-large {
            width: 100%;
            padding: 1.5rem;
            font-size: 1.3rem;
            border: 3px solid var(--border);
            border-radius: 15px;
            text-align: center;
            font-weight: 700;
            letter-spacing: 1px;
            transition: var(--transition);
            margin-bottom: 1rem;
        }

        .code-input-large:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(255, 107, 0, 0.1);
        }

        .code-status {
            padding: 1rem;
            border-radius: 10px;
            margin: 1rem 0;
            font-weight: 600;
            display: none;
        }

        .code-status.success {
            background: rgba(76, 175, 80, 0.1);
            color: #2e7d32;
            border: 1px solid rgba(76, 175, 80, 0.3);
            display: block;
        }

        .code-status.error {
            background: rgba(244, 67, 54, 0.1);
            color: #d32f2f;
            border: 1px solid rgba(244, 67, 54, 0.3);
            display: block;
        }

        /* Concept Display Card */
        .concept-display-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            border: 2px solid var(--border);
            transition: var(--transition);
            max-width: 500px;
            margin: 2rem auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.05);
        }

        .concept-display-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.1);
            border-color: var(--primary);
        }

        .concept-display-image {
            height: 350px;
            position: relative;
            overflow: hidden;
            background: #000;
        }

        .concept-display-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.8s ease;
        }

        .concept-display-card:hover .concept-display-image img {
            transform: scale(1.05);
        }

        .concept-display-code {
            padding: 2rem;
            background: white;
            border-top: 1px solid var(--border);
        }

        .concept-display-code .code-label {
            font-size: 0.9rem;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 700;
            margin-bottom: 0.5rem;
            display: block;
        }

        .concept-display-code .code-value {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--primary);
            letter-spacing: -1px;
        }

        /* ========== Responsive ========== */
        @media(max-width:768px) {
            .nav-links { display:none; }
            .mobile-menu-btn { display:block; }
            
            .search-bar-section h2 { font-size: 2rem; }
            .search-bar-section p { font-size: 1.1rem; }
            
            .form-screen h2 { font-size:2.5rem; }
            .form-screen p { font-size:1.1rem; padding:0 20px; }
            .search-row { flex-direction:column; align-items:center; }
            .search-row input { width:100%; max-width:300px; }
            .search-suggestions { width:100%; max-width:300px; left:50%; transform:translateX(-50%); }
            .categories-row { gap:10px; }
            .vibz-btn { min-width:180px; padding:1rem 1.5rem; }
            .pricing-container { grid-template-columns:1fr; }
            .concept-display-image { height: 250px; }
            .concept-display-code .code-value { font-size: 2rem; }
        }
        @media(max-width:480px) {
            .search-bar-section h2 { font-size: 1.8rem; }
            .search-bar-section p { font-size: 1rem; }
            
            .form-screen h2 { font-size:2rem; }
            .vibz-btn { width:100%; max-width:280px; }
            .categories-row button { flex:0 0 45%; max-width:45%; }
            .code-input-large { font-size: 1.1rem; padding: 1.2rem; }
        }

        @keyframes fadeIn { 
            from { opacity:0; transform:translateY(20px); } 
            to { opacity:1; transform:translateY(0); } 
        }
    </style>
</head>
<body>

<!-- Header -->
<header id="header">
    <div class="container nav-container">
        <a href="#" class="logo">VIBZ</a>
        <nav class="nav-links">
            <a href="#home">Home</a>
            <a href="#portfolio">Portfolio</a>
            <a href="#process">Process</a>
            <a href="#contact">Contact</a>
        </nav>
        <button class="mobile-menu-btn" id="mobileMenuBtn"><i class="fas fa-bars"></i></button>
    </div>
</header>

<!-- SEARCH BAR SECTION (ADDED HERE) -->
<section class="search-bar-section">
    <div class="container">
        <h2>What's Your Business?</h2>
        <p>Tell us what you do and we'll create the perfect website for your needs.</p>
        
        <div class="search-container">
            <div class="search-row">
                <input type="text" id="homepageBusinessInput" placeholder="e.g. Barber, Plumber, Dentist" 
                       oninput="showSearchSuggestions()" onfocus="showSearchSuggestions()" autocomplete="off" />
                <button type="button" class="vibz-btn vibz-btn-primary" onclick="handleHomepageSearch()">Find My Solution</button>
            </div>
            <div class="search-suggestions" id="homepageSearchSuggestions">
                <!-- Suggestions will appear here -->
            </div>
        </div>
    </div>
</section>

<!-- Original Funnel Section -->
<section class="funnel-section">
    <div class="container">
        <!-- Step Indicators -->
        <div class="step-indicator">
            <div class="step-dot active" data-step="1"></div>
            <div class="step-dot" data-step="2"></div>
            <div class="step-dot" data-step="3"></div>
            <div class="step-dot" data-step="4"></div>
            <div class="step-dot" data-step="5"></div>
            <div class="step-dot" data-step="6"></div>
            <div class="step-dot" data-step="7"></div>
            <div class="step-dot" data-step="8"></div>
            <div class="step-dot" data-step="9"></div>
            <div class="step-dot" data-step="10"></div>
            <div class="step-dot" data-step="11"></div>
        </div>

        <form id="formWrapper">
            <!-- Hidden fields -->
            <input type="hidden" id="hiddenPlan" name="Selected Plan">
            <input type="hidden" id="hiddenFeatures" name="Selected Features">
            <input type="hidden" id="hiddenPaymentLink" name="Payment Link">
            <input type="hidden" id="hiddenDesignCode" name="Design Code">

            <!-- STEP 1: Barber Shop Name -->
            <div class="form-screen active" id="step-1">
                <h2>What's Your Barber Shop Name?</h2>
                <p>Tell us your barber shop name so we can personalize your experience.</p>
                <input type="text" id="businessInput" placeholder="e.g. The Gentlemen's Cut">
                <button type="button" class="vibz-btn vibz-btn-primary" onclick="handleBusinessName()">Next</button>
            </div>

            <!-- STEP 2: Project Type -->
            <div class="form-screen" id="step-2">
                <h2>Which service do you need?</h2>
                <div class="options">
                    <button type="button" class="vibz-btn" onclick="setProjectType('New Website')">New Website</button>
                    <button type="button" class="vibz-btn" onclick="setProjectType('Redesign Existing')">Redesign Existing</button>
                    <button type="button" class="vibz-btn" onclick="setProjectType('Maintenance')">Maintenance</button>
                </div>
                <button type="button" class="vibz-btn back-button" onclick="prev()">← Go Back</button>
            </div>

            <!-- STEP 3: Design Concept -->
            <div class="form-screen" id="step-3">
                <h2 id="step3Title">Do you have a design concept in mind?</h2>
                <p id="step3Message">You can enter a code, choose from templates, or request custom design.</p>
                
                <!-- Show design info if coming from concepts page -->
                <div id="designInfo" style="display: none; background: rgba(255, 107, 0, 0.1); padding: 1rem; border-radius: 12px; margin-bottom: 1.5rem; border: 2px solid #FF6B00;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <div style="font-size: 1.5rem; color: #FF6B00;">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div>
                            <p style="margin: 0; color: #121212; font-weight: 700; font-size: 1.1rem;">
                                Design Selected: <span id="selectedDesignCode" style="color: #FF6B00;"></span>
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="options">
                    <button type="button" class="vibz-btn" onclick="setDesignConcept('Code')" id="codeBtn">Yes, I have a code</button>
                    <a href="https://www.vibz.co.uk/barber/concepts.html" class="vibz-btn">Show me concepts</a>
                    <button type="button" class="vibz-btn" onclick="setDesignConcept('Custom')">Custom design</button>
                </div>
                <button type="button" class="vibz-btn back-button" onclick="prev()">← Go Back</button>
            </div>

            <!-- STEP 4: Code Input & Concept Display -->
            <div class="form-screen" id="step-4">
                <h2>Enter Your Design Code</h2>
                <p>Type the code for your chosen design (e.g., barber-1, barber-2, etc.)</p>
                
                <div class="code-input-container">
                    <input type="text" 
                           class="code-input-large" 
                           id="designCodeInput" 
                           placeholder="Enter code (e.g., barber-5)"
                           autocomplete="off">
                    
                    <div id="codeStatus" class="code-status"></div>
                    
                    <div id="conceptDisplay" style="display: none;">
                        <div class="concept-display-card">
                            <div class="concept-display-image">
                                <img id="conceptDisplayImage" src="" alt="Design Preview">
                            </div>
                            <div class="concept-display-code">
                                <span class="code-label">Design Code</span>
                                <div class="code-value" id="conceptDisplayCode"></div>
                            </div>
                        </div>
                        
                        <button type="button" class="vibz-btn vibz-btn-primary" onclick="confirmDesignSelection()" id="confirmDesignBtn">
                            Continue with This Design
                        </button>
                    </div>
                    
                    <button type="button" class="vibz-btn" onclick="tryDifferentCode()" id="tryDifferentBtn" style="display: none; margin-top: 1rem;">
                        Try Different Code
                    </button>
                </div>
                
                <div style="margin-top: 2rem;">
                    <p style="color: var(--gray); font-size: 0.9rem;">
                        <i class="fas fa-info-circle"></i> 
                        Accepted formats: "barber-1", "barber 1", "BARBER-1", "B1", or just "1"
                    </p>
                </div>
                
                <button type="button" class="vibz-btn back-button" onclick="prev()">← Go Back</button>
            </div>
            
            <!-- STEP 5: Features -->
            <div class="form-screen" id="step-5">
                <h2 id="step5Title">Which features do you want?</h2>
                <p id="step5Message">Select all that apply:</p>
                
                <!-- Show design reminder -->
                <div id="step5DesignInfo" style="display: none; background: rgba(255, 107, 0, 0.05); padding: 1rem; border-radius: 10px; margin-bottom: 1.5rem; border: 1px dashed #FF6B00;">
                    <p style="margin: 0; color: #4a4a4a; font-size: 0.9rem;">
                        <i class="fas fa-info-circle" style="color: #FF6B00;"></i>
                        Selected Design: <strong><span id="currentDesignCode"></span></strong>
                    </p>
                </div>
                
                <div class="options">
                    <button type="button" class="vibz-btn feature-btn" data-feature="Online Booking" onclick="toggleFeature(this, 'Online Booking')">Online Booking</button>
                    <button type="button" class="vibz-btn feature-btn" data-feature="Gallery/Portfolio" onclick="toggleFeature(this, 'Gallery/Portfolio')">Gallery/Portfolio</button>
                    <button type="button" class="vibz-btn feature-btn" data-feature="Local SEO" onclick="toggleFeature(this, 'Local SEO')">Local SEO</button>
                    <button type="button" class="vibz-btn feature-btn" data-feature="Reviews Section" onclick="toggleFeature(this, 'Reviews Section')">Reviews Section</button>
                    <button type="button" class="vibz-btn feature-btn" data-feature="Social Media Integration" onclick="toggleFeature(this, 'Social Media Integration')">Social Media Integration</button>
                    <button type="button" class="vibz-btn feature-btn" data-feature="Branding & Logo" onclick="toggleFeature(this, 'Branding & Logo')">Branding & Logo</button>
                </div>
                
                <!-- Selected features counter -->
                <div id="selectedCounter" style="margin-top: 1.5rem; text-align: center; display: none;">
                    <p style="color: #FF6B00; font-weight: 600;">
                        <span id="selectedCount">0</span> feature(s) selected
                    </p>
                </div>
                
                <button type="button" class="vibz-btn vibz-btn-primary" onclick="next()" style="margin-top: 1.5rem;">
                    Next Step
                </button>
                
                <button type="button" class="vibz-btn back-button" onclick="prev()">← Go Back</button>
            </div>
            
            <!-- STEP 6: Target Audience -->
            <div class="form-screen" id="step-6">
                <h2>Who are your main clients?</h2>
                <div class="options">
                    <button type="button" class="vibz-btn" onclick="setAudience('Men')">Men</button>
                    <button type="button" class="vibz-btn" onclick="setAudience('Women')">Women</button>
                    <button type="button" class="vibz-btn" onclick="setAudience('Children')">Children</button>
                    <button type="button" class="vibz-btn" onclick="setAudience('Family')">Mixed/Family</button>
                </div>
                <button type="button" class="vibz-btn back-button" onclick="prev()">← Go Back</button>
            </div>

            <!-- STEP 7: Website Style -->
            <div class="form-screen" id="step-7">
                <h2>What style do you prefer for your website?</h2>
                <div class="options">
                    <button type="button" class="vibz-btn" onclick="setStyle('Classic')">Classic</button>
                    <button type="button" class="vibz-btn" onclick="setStyle('Modern')">Modern</button>
                    <button type="button" class="vibz-btn" onclick="setStyle('Minimalist')">Minimalist</button>
                    <button type="button" class="vibz-btn" onclick="setStyle('Premium')">Premium</button>
                </div>
                <button type="button" class="vibz-btn back-button" onclick="prev()">← Go Back</button>
            </div>

            <!-- STEP 8: Color Scheme -->
            <div class="form-screen" id="step-8">
                <h2>Preferred color scheme?</h2>
                <div class="options">
                    <button type="button" class="vibz-btn" onclick="setColor('Black & Gold')">Black & Gold</button>
                    <button type="button" class="vibz-btn" onclick="setColor('Modern/Vibrant')">Modern/Vibrant</button>
                    <button type="button" class="vibz-btn" onclick="setColor('Neutral/Classic')">Neutral/Classic</button>
                    <button type="button" class="vibz-btn" onclick="setColor('Custom')">Custom</button>
                </div>
                <button type="button" class="vibz-btn back-button" onclick="prev()">← Go Back</button>
            </div>

            <!-- STEP 9: Website Goal -->
            <div class="form-screen" id="step-9">
                <h2>What's the main goal of your website?</h2>
                <div class="options">
                    <button type="button" class="vibz-btn" onclick="setGoal('Attract New Clients')">Attract New Clients</button>
                    <button type="button" class="vibz-btn" onclick="setGoal('Showcase Styles/Portfolio')">Showcase Styles/Portfolio</button>
                    <button type="button" class="vibz-btn" onclick="setGoal('Facilitate Bookings')">Facilitate Bookings</button>
                </div>
                <button type="button" class="vibz-btn back-button" onclick="prev()">← Go Back</button>
            </div>

            <!-- STEP 10: Booking Method -->
            <div class="form-screen" id="step-10">
                <h2>Preferred booking method?</h2>
                <div class="options">
                    <button type="button" class="vibz-btn" onclick="setBooking('Online Booking')">Online Booking</button>
                    <button type="button" class="vibz-btn" onclick="setBooking('Phone/WhatsApp')">Phone/WhatsApp</button>
                    <button type="button" class="vibz-btn" onclick="setBooking('Contact Form')">Contact Form</button>
                </div>
                <button type="button" class="vibz-btn back-button" onclick="prev()">← Go Back</button>
            </div>

            <!-- STEP 11: Plan Type -->
            <div class="form-screen" id="step-11">
                <h2>Choose your plan type</h2>
                <div class="options">
                    <button type="button" class="vibz-btn" onclick="setPlan('Own Outright')">Own Outright</button>
                    <button type="button" class="vibz-btn" onclick="setPlan('Monthly Support')">Monthly Support</button>
                </div>
                <button type="button" class="vibz-btn back-button" onclick="prev()">← Go Back</button>
            </div>

            <!-- STEP 12: Recommended Plan -->
            <div class="form-screen" id="step-12">
                <h2>Your Recommended Plan</h2>
                <p id="planRecommendation">Based on your selections, here's what we recommend:</p>
                <div class="pricing-container" id="pricingCards"></div>
                <button type="button" class="vibz-btn back-button" onclick="prev()">← Go Back</button>
            </div>
        </form>
    </div>
</section>

<script>
// ========== HOMEPAGE SEARCH FUNCTIONALITY ==========
// (Duplicated from funnel.html)

// ALL barber-related terms map to ONE suggestion
const barberKeywords = [
    // Direct terms
    'barber', 'barber shop', 'barbershop', 'barbers', 'haircut', 'hair cut', 
    'hairstyle', 'hair style', 'men\'s haircut', 'men\'s grooming', 'beard trim',
    'shave', 'barber studio', 'gentleman\'s barber', 'classic barber', 'modern barber',
    'traditional barber', 'hair salon', 'men\'s salon', 'grooming salon', 'trim & shave',
    'cut & shave', 'barber & stylist', 'hair clipper', 'fade cut', 'buzz cut', 'short hair',
    'men hair', 'men haircut', 'male haircut', 'male grooming', 'beard grooming',
    'mustache trim', 'facial hair', 'hair design', 'styling', 'clipper cut',
    
    // Typos & misspellings
    'barbar', 'barbor', 'barbur', 'barbar shop', 'barbor shop', 'barbur shop',
    'barbarshop', 'barbarshope', 'barber shope', 'barbershoppe', 'hair cutt',
    'haircutt', 'hair cuting', 'haircuting', 'hairstyling', 'hair styling',
    'mens haircut', 'mens grooming', 'beardtrim', 'beard trimming', 'beardtrimming',
    'haircutting', 'hair stylist', 'hairstylist', 'barbarstudio', 'barborstudio',
    
    // Variations with spaces/dashes
    'barber-shop', 'hair-cut', 'hair-style', 'beard-trim', 'men-grooming',
    'barber-studio', 'gentlemans-barber', 'barber&stylist', 'trim&shave'
];

// Show search suggestions on homepage
function showSearchSuggestions() {
    const input = document.getElementById('homepageBusinessInput');
    const suggestionsContainer = document.getElementById('homepageSearchSuggestions');
    const searchTerm = input.value.trim().toLowerCase();
    
    // Clear previous suggestions
    suggestionsContainer.innerHTML = '';
    suggestionsContainer.style.display = 'none';
    
    // Don't show anything if search is empty
    if (!searchTerm) {
        return;
    }
    
    // Check if search term matches ANY barber keyword
    const isBarberRelated = barberKeywords.some(keyword => {
        // Check if search term contains keyword OR keyword contains search term
        return searchTerm.includes(keyword) || keyword.includes(searchTerm);
    });
    
    // Also check for partial matches (e.g., "hair" matches "haircut")
    const hasBarberPartial = searchTerm.includes('hair') || 
                            searchTerm.includes('barber') || 
                            searchTerm.includes('barb') || 
                            searchTerm.includes('groom') || 
                            searchTerm.includes('beard') || 
                            searchTerm.includes('trim') || 
                            searchTerm.includes('shave') || 
                            searchTerm.includes('cut') || 
                            searchTerm.includes('style') || 
                            searchTerm.includes('salon') ||
                            searchTerm.includes('studio') ||
                            searchTerm.includes('men');
    
    if (isBarberRelated || hasBarberPartial) {
        suggestionsContainer.innerHTML = `
            <div class="suggestion-item" onclick="redirectToBarberFunnel()">
                Barber
            </div>
        `;
        suggestionsContainer.style.display = 'block';
    }
    
    // If not barber-related, show nothing or generic message
    else if (searchTerm.length >= 2) {
        suggestionsContainer.innerHTML = `
            <div class="suggestion-item info-item" onclick="this.style.display='none'">
                Type "barber" for barber websites, or select from categories below.
            </div>
        `;
        suggestionsContainer.style.display = 'block';
    }
}

// Redirect to barber funnel from homepage
function redirectToBarberFunnel() {
    window.location.href = 'https://www.vibz.co.uk/barber/';
}

// Handle homepage search
function handleHomepageSearch() {
    const input = document.getElementById('homepageBusinessInput');
    const value = input.value.trim().toLowerCase();
    const suggestionsContainer = document.getElementById('homepageSearchSuggestions');
    
    // Hide suggestions
    if (suggestionsContainer) {
        suggestionsContainer.style.display = 'none';
    }
    
    if (!value) {
        alert('Please enter your business type or select from the options.');
        return;
    }
    
    // Check if it's barber-related
    const isBarberRelated = barberKeywords.some(keyword => {
        return value.includes(keyword) || keyword.includes(value);
    });
    
    const hasBarberPartial = value.includes('hair') || 
                            value.includes('barber') || 
                            value.includes('barb') || 
                            value.includes('groom') || 
                            value.includes('beard') || 
                            value.includes('trim') || 
                            value.includes('shave') || 
                            value.includes('cut') || 
                            value.includes('style') || 
                            value.includes('salon') ||
                            value.includes('studio') ||
                            value.includes('men');
    
    // If barber-related, redirect to barber funnel
    if (isBarberRelated || hasBarberPartial) {
        window.location.href = 'https://www.vibz.co.uk/barber/';
        return;
    }
    
    // If no niche match, redirect to generic funnel
    window.location.href = 'https://www.vibz.co.uk/funnel.html?business=' + encodeURIComponent(value);
}

// Hide suggestions when clicking outside (homepage)
document.addEventListener('click', function(event) {
    const suggestions = document.getElementById('homepageSearchSuggestions');
    const input = document.getElementById('homepageBusinessInput');
    
    if (suggestions && input) {
        if (!input.contains(event.target) && !suggestions.contains(event.target)) {
            suggestions.style.display = 'none';
        }
    }
});

// ========== BARBER CONCEPTS DATABASE ==========
// EASY TO EDIT: Add new concepts here when you create them
// Format: { code: "barber-1", image: "image-url.jpg" }

const barberConcepts = [
    // Current concepts (1-9)
    { code: "barber-1", image: "https://images.unsplash.com/photo-1585747860715-2ba37e788b70?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80" },
    { code: "barber-2", image: "https://images.unsplash.com/photo-1599351431202-1e0f0137899a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80" },
    { code: "barber-3", image: "https://images.unsplash.com/photo-1567894340315-735d7c361db0?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80" },
    { code: "barber-4", image: "https://images.unsplash.com/photo-1596462502278-27bfdc403348?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80" },
    { code: "barber-5", image: "https://images.unsplash.com/photo-1562157873-818bc0726f68?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80" },
    { code: "barber-6", image: "https://images.unsplash.com/photo-1580618864180-f6d7d39b8ff6?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80" },
    { code: "barber-7", image: "https://images.unsplash.com/photo-1621605815972-f9e5c6c4a9c4?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80" },
    { code: "barber-8", image: "https://images.unsplash.com/photo-1599351431202-1e0f0137899a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80" },
    { code: "barber-9", image: "https://images.unsplash.com/photo-1580618864180-f6d7d39b8ff6?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80" }
    
    // TO ADD NEW CONCEPTS: Copy and edit these lines:
    // { code: "barber-10", image: "https://your-image-url-here.jpg" },
    // { code: "barber-11", image: "https://your-image-url-here.jpg" },
    // etc...
];

// ========== FORM STATE MANAGEMENT ==========
let currentStep = 1;
const formData = {
    businessName: '',
    projectType: '',
    designConcept: '',
    designCode: '',
    features: [],
    audience: '',
    style: '',
    color: '',
    goal: '',
    booking: '',
    planType: ''
};

// DOM elements
const screens = document.querySelectorAll('.form-screen');
const stepDots = document.querySelectorAll('.step-dot');
const businessInput = document.getElementById('businessInput');
const designCodeInput = document.getElementById('designCodeInput');
const codeStatus = document.getElementById('codeStatus');
const conceptDisplay = document.getElementById('conceptDisplay');
const conceptDisplayImage = document.getElementById('conceptDisplayImage');
const conceptDisplayCode = document.getElementById('conceptDisplayCode');
const confirmDesignBtn = document.getElementById('confirmDesignBtn');
const tryDifferentBtn = document.getElementById('tryDifferentBtn');

// ========== CODE VALIDATION & DISPLAY ==========

// Normalize code input (accepts variations)
function normalizeCode(input) {
    if (!input) return '';
    
    // Convert to lowercase and trim
    let normalized = input.toString().toLowerCase().trim();
    
    // Remove "barber" prefix variations
    normalized = normalized.replace(/^barber[\s\-]*/i, '');
    
    // Remove any remaining non-numeric characters (except dash/hyphen)
    normalized = normalized.replace(/[^0-9\-]/g, '');
    
    // If it's just a number, format as "barber-X"
    if (/^\d+$/.test(normalized)) {
        return `barber-${normalized}`;
    }
    
    // If it already has a hyphen, ensure "barber-" prefix
    if (normalized.includes('-')) {
        const num = normalized.split('-').pop();
        if (/^\d+$/.test(num)) {
            return `barber-${num}`;
        }
    }
    
    return '';
}

// Find concept by code (flexible matching)
function findConceptByCode(input) {
    const normalizedCode = normalizeCode(input);
    if (!normalizedCode) return null;
    
    // Find exact match
    return barberConcepts.find(concept => concept.code === normalizedCode);
}

// Validate and display concept
function validateAndDisplayConcept() {
    const input = designCodeInput.value.trim();
    
    if (!input) {
        codeStatus.textContent = '';
        codeStatus.className = 'code-status';
        conceptDisplay.style.display = 'none';
        tryDifferentBtn.style.display = 'none';
        return;
    }
    
    const concept = findConceptByCode(input);
    
    if (concept) {
        // Show success and display concept
        codeStatus.textContent = `✓ Valid code: ${concept.code}`;
        codeStatus.className = 'code-status success';
        
        // Display the concept
        conceptDisplayImage.src = concept.image;
        conceptDisplayImage.alt = `Design ${concept.code}`;
        conceptDisplayCode.textContent = concept.code.toUpperCase();
        conceptDisplay.style.display = 'block';
        
        // Update continue button
        confirmDesignBtn.innerHTML = `<i class="fas fa-check"></i> Continue with ${concept.code.toUpperCase()}`;
        
        // Show try different button
        tryDifferentBtn.style.display = 'inline-block';
    } else {
        // Show error
        codeStatus.textContent = `✗ Design not found. Try "barber-1" to "barber-${barberConcepts.length}"`;
        codeStatus.className = 'code-status error';
        conceptDisplay.style.display = 'none';
        tryDifferentBtn.style.display = 'none';
    }
}

// Confirm design selection
function confirmDesignSelection() {
    const input = designCodeInput.value.trim();
    const concept = findConceptByCode(input);
    
    if (concept) {
        formData.designCode = concept.code;
        formData.designConcept = 'From Code';
        updateHiddenFields();
        next();
    }
}

// Try different code
function tryDifferentCode() {
    designCodeInput.value = '';
    designCodeInput.focus();
    codeStatus.textContent = '';
    codeStatus.className = 'code-status';
    conceptDisplay.style.display = 'none';
    tryDifferentBtn.style.display = 'none';
}

// ========== FUNNEL FUNCTIONS ==========

// Check URL parameters and jump to correct step
function checkURLParams() {
    const params = new URLSearchParams(window.location.search);
    const step = params.get('step');
    const concept = params.get('concept');
    
    console.log('URL Params:', { step, concept });
    
    // If step parameter exists, jump to that step
    if (step) {
        const stepNum = parseInt(step);
        if (!isNaN(stepNum) && stepNum >= 1 && stepNum <= 12) {
            currentStep = stepNum;
            console.log('Jumping to step:', currentStep);
            
            // Store design data if coming from concepts page
            if (concept) {
                const foundConcept = findConceptByCode(concept);
                if (foundConcept) {
                    formData.designCode = foundConcept.code;
                    formData.designConcept = 'From Concepts';
                    
                    console.log('Design selected from concepts:', foundConcept.code);
                    
                    // Store in localStorage for persistence
                    localStorage.setItem('selectedDesignCode', foundConcept.code);
                }
            }
            
            return true; // Indicate we jumped from URL
        }
    }
    
    // Check localStorage for saved design
    const savedDesignCode = localStorage.getItem('selectedDesignCode');
    if (savedDesignCode) {
        formData.designCode = savedDesignCode;
        formData.designConcept = 'From Concepts';
    }
    
    return false; // No URL jump
}

// Show a specific screen
function showScreen(screenId) {
    screens.forEach(screen => screen.classList.remove('active'));
    const screen = document.getElementById(screenId);
    if (screen) {
        screen.classList.add('active');
        
        // Update UI for specific steps
        if (screenId === 'step-3' && formData.designCode) {
            // Show design info in step 3
            document.getElementById('designInfo').style.display = 'block';
            document.getElementById('selectedDesignCode').textContent = formData.designCode.toUpperCase();
        }
        
        if (screenId === 'step-5') {
            // Update step 5 with design info
            if (formData.designCode) {
                document.getElementById('step5Title').innerHTML = `Select Features for <span style="color: #FF6B00;">${formData.designCode.toUpperCase()}</span>`;
                document.getElementById('step5DesignInfo').style.display = 'block';
                document.getElementById('currentDesignCode').textContent = formData.designCode.toUpperCase();
            }
            
            // Update feature buttons based on selections
            updateFeatureButtons();
            updateFeatureCounter();
        }
        
        // Auto-focus code input on step 4
        if (screenId === 'step-4') {
            setTimeout(() => {
                designCodeInput.focus();
                
                // Pre-fill if we have a design code
                if (formData.designCode) {
                    designCodeInput.value = formData.designCode;
                    validateAndDisplayConcept();
                }
            }, 100);
        }
    }
}

// Step navigation
function next() {
    if (currentStep < 12) {
        currentStep++;
        updateStepIndicator();
    }
}

function prev() {
    if (currentStep > 1) {
        currentStep--;
        updateStepIndicator();
    }
}

function updateStepIndicator() {
    // Update step dots
    stepDots.forEach((dot, index) => {
        dot.classList.toggle('active', index < currentStep);
    });
    
    // Show current screen
    showScreen('step-' + currentStep);
    
    // Update hidden fields
    updateHiddenFields();
}

// Update hidden form fields
function updateHiddenFields() {
    document.getElementById('hiddenDesignCode').value = formData.designCode || '';
    document.getElementById('hiddenFeatures').value = formData.features.join(', ');
}

// STEP 1: Handle business name input
function handleBusinessName() {
    const value = businessInput.value.trim();
    if (value) {
        formData.businessName = value;
        next();
    } else {
        alert('Please enter your barber shop name');
        businessInput.focus();
    }
}

// STEP 2: Project type selection
function setProjectType(type) {
    formData.projectType = type;
    next();
}

// STEP 3: Design Concept
function setDesignConcept(option) {
    formData.designConcept = option;
    
    if (option === 'Code') {
        next(); // Go to step 4 (code input)
    } else if (option === 'Custom') {
        formData.designCode = 'CUSTOM';
        next(); // Skip to step 5
    }
}

// STEP 5: Feature selection
function toggleFeature(button, feature) {
    const index = formData.features.indexOf(feature);
    
    if (index === -1) {
        // Add feature
        formData.features.push(feature);
        button.classList.add('selected');
    } else {
        // Remove feature
        formData.features.splice(index, 1);
        button.classList.remove('selected');
    }
    
    updateFeatureCounter();
}

// Update feature buttons visual state
function updateFeatureButtons() {
    document.querySelectorAll('.feature-btn').forEach(button => {
        const feature = button.getAttribute('data-feature');
        if (formData.features.includes(feature)) {
            button.classList.add('selected');
        } else {
            button.classList.remove('selected');
        }
    });
}

// Update feature counter
function updateFeatureCounter() {
    const count = formData.features.length;
    const counter = document.getElementById('selectedCounter');
    const countSpan = document.getElementById('selectedCount');
    
    if (count > 0) {
        counter.style.display = 'block';
        countSpan.textContent = count;
        document.getElementById('step5Message').textContent = `Selected ${count} feature(s). Click Next when ready.`;
    } else {
        counter.style.display = 'none';
        document.getElementById('step5Message').textContent = 'Select all that apply:';
    }
}

// STEP 6-11: Simple selection functions
function setAudience(audience) {
    formData.audience = audience;
    next();
}

function setStyle(style) {
    formData.style = style;
    next();
}

function setColor(color) {
    formData.color = color;
    next();
}

function setGoal(goal) {
    formData.goal = goal;
    next();
}

function setBooking(booking) {
    formData.booking = booking;
    next();
}

// STEP 11: Plan type
function setPlan(plan) {
    formData.planType = plan;
    showRecommendedPlan();
    next();
}

// STEP 12: Show recommended plan dynamically
function showRecommendedPlan() {
    const container = document.getElementById('pricingCards');
    let plan;

    if (formData.planType === 'Own Outright') {
        plan = {
            name: 'Elite Package',
            price: '£2,499',
            period: 'one-time',
            features: [
                'Custom Website Design',
                'Mobile Responsive',
                'SEO Optimization',
                'Google Analytics Setup',
                'Contact Form Integration',
                formData.features.includes('Online Booking') ? 'Booking System' : null,
                formData.features.includes('Branding & Logo') ? 'Full Brand Identity' : null,
                '3 Months Support',
                'PageSpeed Optimization'
            ].filter(Boolean)
        };
    } else {
        plan = {
            name: 'Premium Monthly',
            price: '£199',
            period: 'per month',
            features: [
                'Everything in Elite Package',
                'Monthly Hosting',
                'Weekly Backups',
                'Security Monitoring',
                'Content Updates',
                'Performance Optimization',
                '24/7 Support',
                'Unlimited Edits',
                'SEO Maintenance',
                'Analytics Reporting'
            ]
        };
    }

    // Add design info if coming from concepts
    if (formData.designCode) {
        if (formData.designCode === 'CUSTOM') {
            plan.features.unshift('Custom Design (Tailored to your needs)');
        } else {
            plan.features.unshift(`Design: ${formData.designCode.toUpperCase()}`);
        }
    }

    const featuresHtml = plan.features.map(f => `<li>${f}</li>`).join('');
    container.innerHTML = `
        <div class="pricing-card">
            <h3>${plan.name}</h3>
            <div class="price">${plan.price}<span class="price-period">/${plan.period}</span></div>
            <ul class="pricing-features">${featuresHtml}</ul>
            <button type="button" class="vibz-btn vibz-btn-primary" onclick="goToPayment()">
                Start This Plan
            </button>
        </div>
    `;
}

// Redirect to payment page
function goToPayment() {
    // Store all form data before redirecting
    localStorage.setItem('funnelFormData', JSON.stringify(formData));
    
    const link = formData.planType === 'Own Outright'
        ? 'https://buy.stripe.com/test_00g9CBeBea4X6Gg28b'
        : 'https://buy.stripe.com/test_28odSBdBCgVn7Z2fZ1';
    window.location.href = link;
}

// ========== INITIALIZATION ==========

// Initialize page
document.addEventListener('DOMContentLoaded', () => {
    // First check URL parameters
    const jumpedFromURL = checkURLParams();
    
    // Update step indicator (this will show the correct screen)
    updateStepIndicator();
    
    // Mobile menu toggle
    const mobileBtn = document.getElementById('mobileMenuBtn');
    if (mobileBtn) {
        mobileBtn.addEventListener('click', () => {
            const navLinks = document.querySelector('.nav-links');
            navLinks.style.display = navLinks.style.display === 'flex' ? 'none' : 'flex';
        });
    }
    
    // Auto-focus business input if on step 1
    if (currentStep === 1 && businessInput) {
        businessInput.focus();
    }
    
    // Code input validation on typing
    designCodeInput.addEventListener('input', validateAndDisplayConcept);
    
    // Allow Enter key to confirm design
    designCodeInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            const input = designCodeInput.value.trim();
            const concept = findConceptByCode(input);
            if (concept) {
                confirmDesignSelection();
            }
        }
    });
    
    // Highlight step 5 dot if coming from concepts
    if (jumpedFromURL && currentStep === 5) {
        const step5Dot = document.querySelector('.step-dot[data-step="5"]');
        if (step5Dot) {
            step5Dot.classList.add('jump-point');
        }
    }
    
    // Auto-focus homepage search input
    const homepageInput = document.getElementById('homepageBusinessInput');
    if (homepageInput) {
        setTimeout(() => {
            homepageInput.focus();
        }, 500);
    }
});
</script>

</body>
</html>
