<!DOCTYPE html>
<html lang="en"> 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIBZ | Barber Website Funnel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        /* ========== Root & General Styles ========== */
        :root {
            --primary: #FF6B00;
            --dark: #121212;
            --light: #ffffff;
            --gray: #4a4a4a;
            --light-gray: #f9f9f9;
            --border: #eeeeee;
            --transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            --standard-green: #4CAF50;
            --premium-blue: #2196F3;
        }

        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family:'Inter',sans-serif; background-color:var(--light); color:var(--dark); line-height:1.6; overflow-x:hidden; scroll-behavior:smooth; }
        h1,h2,h3,h4,h5 { font-weight:900; line-height:1.1; letter-spacing:-1px; }

        .container { width:100%; max-width:1200px; margin:0 auto; padding:0 30px; }

        /* ========== Header ========== */
        header { position:fixed; top:0; left:0; width:100%; z-index:1000; padding:20px 0; transition:var(--transition); background:rgba(255,255,255,0.95); backdrop-filter:blur(10px); border-bottom:1px solid var(--border); }
        .nav-container { display:flex; justify-content:space-between; align-items:center; }
        .logo { font-size:28px; font-weight:900; color:var(--primary); text-decoration:none; letter-spacing:-1px; }
        .logo::after { content:"."; color:#000; margin-left:2px; font-weight:900; }
        .nav-links { display:flex; gap:40px; }
        .nav-links a { color:var(--dark); text-decoration:none; font-weight:600; font-size:16px; position:relative; transition:var(--transition); }
        .nav-links a:hover { color:var(--primary); }
        .mobile-menu-btn { display:none; background:none; border:none; color:var(--dark); font-size:24px; cursor:pointer; }

        /* ========== Funnel Section ========== */
        .funnel-section { min-height:100vh; padding-top:150px; padding-bottom:60px; display:flex; justify-content:center; align-items:center; text-align:center; background:radial-gradient(circle at top right, #fff5ee, #ffffff); }

        .form-screen { width:100%; max-width:800px; margin:0 auto; display:none; opacity:0; transition:opacity 0.5s ease; }
        .form-screen.active { display:block; opacity:1; animation:fadeIn 0.5s ease forwards; }
        .form-screen h2 { font-size:3rem; margin-bottom:1.5rem; letter-spacing:-1px; }
        .form-screen p { font-size:1.2rem; color:var(--gray); max-width:600px; margin:0 auto 2rem; line-height:1.6; }

        /* ========== Buttons ========== */
        .vibz-btn { background-color:transparent; color:var(--primary); border:2px solid var(--primary); border-radius:12px; font-weight:700; padding:1.2rem 2.5rem; font-size:1.1rem; cursor:pointer; transition:var(--transition); text-decoration:none; display:inline-block; margin:0.5rem; min-width:200px; }
        .vibz-btn:hover { background:var(--primary); color:white; transform:scale(1.05); box-shadow:0 15px 30px rgba(255,107,0,0.2); }
        .vibz-btn-primary { background:var(--primary); color:white; border:2px solid var(--primary); }
        .vibz-btn-primary:hover { background:white; color:var(--primary); }
        .back-button { background-color:var(--light-gray); color:var(--gray); border:2px solid var(--border); margin-top:2rem; }
        .back-button:hover { background-color:var(--border); color:var(--dark); transform:scale(1.02); box-shadow:0 10px 20px rgba(0,0,0,0.1); }

        /* ========== Step Options ========== */
        .step-options-large {
            margin: 3rem 0;
        }

        .step-options-large .vibz-btn {
            min-width: 300px;
            padding: 1.5rem 2.5rem;
            font-size: 1.2rem;
            margin: 1rem;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        /* ========== Lead Capture Form Styles ========== */
        .lead-form-container {
            background: white;
            padding: 3rem;
            border-radius: 32px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.08);
            max-width: 600px;
            margin: 0 auto;
            text-align: left;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--dark);
            font-size: 0.95rem;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 1rem 1.2rem;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 1rem;
            font-family: 'Inter', sans-serif;
            transition: var(--transition);
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(255,107,0,0.1);
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
        }

        .form-note {
            font-size: 0.85rem;
            color: var(--gray);
            margin-top: 0.5rem;
            font-style: italic;
        }

        .submit-btn {
            width: 100%;
            padding: 1.2rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 1rem;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(255,107,0,0.3);
        }

        /* ========== Step 1 input styling ========== */
        #step-1 input[type="text"] {
            width: 100%;
            padding: 1rem 1.2rem;
            font-size: 1rem;
            border: 2px solid var(--gray);
            border-radius: 0.5rem;
            margin-bottom: 1.5rem;
            box-sizing: border-box;
        }

        #step-1 input[type="text"]:focus {
            border-color: var(--primary);
            outline: none;
        }

        /* Feature button selection styles */
        .vibz-btn.selected {
            background-color: #FF6B00 !important;
            color: white !important;
            border-color: #FF6B00 !important;
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(255, 107, 0, 0.2);
        }

        /* Design info box */
        .design-info-box {
            animation: fadeIn 0.5s ease;
        }

        /* ========== Step 4: Code Input & Concept Display ========== */
        .code-input-container {
            max-width: 500px;
            margin: 0 auto 3rem;
        }

        .code-input-large {
            width: 100%;
            padding: 1.5rem;
            font-size: 1.3rem;
            border: 3px solid var(--border);
            border-radius: 15px;
            text-align: center;
            font-weight: 700;
            letter-spacing: 1px;
            transition: var(--transition);
            margin-bottom: 1rem;
        }

        .code-input-large:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(255, 107, 0, 0.1);
        }

        .code-status {
            padding: 1rem;
            border-radius: 10px;
            margin: 1rem 0;
            font-weight: 600;
            display: none;
        }

        .code-status.success {
            background: rgba(76, 175, 80, 0.1);
            color: #2e7d32;
            border: 1px solid rgba(76, 175, 80, 0.3);
            display: block;
        }

        .code-status.error {
            background: rgba(244, 67, 54, 0.1);
            color: #d32f2f;
            border: 1px solid rgba(244, 67, 54, 0.3);
            display: block;
        }

        /* Concept Display Card */
        .concept-display-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            border: 2px solid var(--border);
            transition: var(--transition);
            max-width: 500px;
            margin: 2rem auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.05);
        }

        .concept-display-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.1);
            border-color: var(--primary);
        }

        .concept-display-image {
            height: 350px;
            position: relative;
            overflow: hidden;
            background: #000;
        }

        .concept-display-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.8s ease;
        }

        .concept-display-card:hover .concept-display-image img {
            transform: scale(1.05);
        }

        .concept-display-code {
            padding: 2rem;
            background: white;
            border-top: 1px solid var(--border);
        }

        .concept-display-code .code-label {
            font-size: 0.9rem;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 700;
            margin-bottom: 0.5rem;
            display: block;
        }

        .concept-display-code .code-value {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--primary);
            letter-spacing: -1px;
        }

        /* ========== Service Cards ========== */
        .service-card {
            background: rgba(76, 175, 80, 0.05);
            border: 2px solid rgba(76, 175, 80, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .service-card.premium {
            background: rgba(33, 150, 243, 0.05);
            border: 2px solid rgba(33, 150, 243, 0.3);
        }
        
        .service-card.selected {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .service-card.standard.selected {
            background: rgba(76, 175, 80, 0.15);
            border-color: #4CAF50;
        }
        
        .service-card.premium.selected {
            background: rgba(33, 150, 243, 0.15);
            border-color: #2196F3;
        }
        
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin: 2rem 0;
            max-height: 500px;
            overflow-y: auto;
            padding: 10px;
        }
        
        /* ========== Glow Effect - FIXED BORDER GLOW ========== */
        .pricing-card.recommended-glow {
            position: relative;
            z-index: 1;
        }
        
        .pricing-card.recommended-glow::before {
            content: '';
            position: absolute;
            top: -4px;
            left: -4px;
            right: -4px;
            bottom: -4px;
            background: linear-gradient(45deg, #FF6B00, #FF8B00, #FF6B00, #FF8B00, #FF6B00);
            border-radius: 36px; /* Slightly larger than card border radius */
            z-index: -1;
            opacity: 0.6;
            filter: blur(6px);
            animation: glowPulse 3s infinite;
        }
        
        @keyframes glowPulse {
            0% { opacity: 0.4; }
            50% { opacity: 0.8; }
            100% { opacity: 0.4; }
        }

        /* ========== Step 9: Plan Summary Cards ========== */
        .plan-summary-card {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            border: 3px solid var(--border);
            text-align: left;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            transition: var(--transition);
        }
        
        .plan-summary-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .plan-summary-card.standard {
            border-color: #4CAF50;
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.05), white);
        }
        
        .plan-summary-card.premium {
            border-color: #2196F3;
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.05), white);
        }
        
        .plan-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border);
        }
        
        .plan-header.standard {
            border-bottom-color: #4CAF50;
        }
        
        .plan-header.premium {
            border-bottom-color: #2196F3;
        }
        
        .plan-title {
            font-size: 1.8rem;
            font-weight: 900;
            letter-spacing: -1px;
        }
        
        .plan-title.standard {
            color: #4CAF50;
        }
        
        .plan-title.premium {
            color: #2196F3;
        }
        
        .plan-price {
            font-size: 2.5rem;
            font-weight: 900;
        }
        
        .plan-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .plan-detail-item {
            padding: 0.8rem 1rem;
            background: white;
            border-radius: 12px;
            font-size: 0.9rem;
            border: 1px solid var(--border);
            transition: var(--transition);
        }
        
        .plan-detail-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .plan-detail-item.standard {
            border-left: 4px solid #4CAF50;
        }
        
        .plan-detail-item.premium {
            border-left: 4px solid #2196F3;
        }
        
        .plan-detail-item strong {
            display: block;
            margin-bottom: 0.3rem;
            color: var(--dark);
            font-size: 1rem;
        }
        
        .divider {
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--border), transparent);
            margin: 2rem 0;
            position: relative;
        }
        
        .divider-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 0 1rem;
            font-size: 0.9rem;
            color: var(--gray);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* ========== Pricing Cards ========== */
        .pricing-container { display:grid; grid-template-columns:repeat(auto-fit, minmax(280px,1fr)); gap:30px; margin-top:40px; }
        .pricing-card { padding:3rem 2.5rem; background:var(--light-gray); border-radius:32px; position:relative; overflow:hidden; transition:var(--transition); border:3px solid transparent; }
        .pricing-card:hover { background:white; border-color:var(--border); transform:translateY(-10px); box-shadow:0 30px 60px rgba(0,0,0,0.05); }
        .pricing-card h3 { font-size:1.8rem; margin-bottom:1rem; color:var(--dark); }
        .price { font-size:3rem; font-weight:900; color:var(--primary); margin:1.5rem 0; display:block; }
        .price-period { font-size:1rem; color:var(--gray); font-weight:normal; }
        .pricing-features { list-style:none; text-align:left; margin:2rem 0; max-height: 400px; overflow-y: auto; padding-right: 10px; }
        .pricing-features li { margin-bottom:1rem; padding-left:30px; position:relative; }
        .pricing-features li:before { content:"✓"; position:absolute; left:0; color:var(--primary); font-weight:bold; }
        .pricing-features li.standard-feature:before { color: #4CAF50; }
        .pricing-features li.premium-feature:before { color: #2196F3; }
        
        .selected-features-section {
            margin-top: 2rem;
            padding: 1.5rem;
            background: rgba(255, 107, 0, 0.05);
            border-radius: 15px;
            border: 2px solid rgba(255, 107, 0, 0.2);
        }
        
        .selected-features-section h4 {
            color: #FF6B00;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }
        
        .selected-features-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .selected-feature-badge {
            background: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .selected-feature-badge.standard {
            border-color: #4CAF50;
            color: #4CAF50;
        }
        
        .selected-feature-badge.premium {
            border-color: #2196F3;
            color: #2196F3;
        }

        /* Success message */
        .success-message { background:var(--light-gray); padding:3rem; border-radius:32px; margin-top:2rem; border:1px solid var(--border); }
        .success-message h3 { color:var(--primary); margin-bottom:1rem; }

        /* ========== Responsive ========== */
        @media(max-width:768px) {
            .nav-links { display:none; }
            .mobile-menu-btn { display:block; }
            .form-screen h2 { font-size:2.5rem; }
            .form-screen p { font-size:1.1rem; padding:0 20px; }
            .step-options-large .vibz-btn { min-width: 250px; font-size: 1.1rem; padding: 1.2rem 2rem; }
            .vibz-btn { min-width:180px; padding:1rem 1.5rem; }
            .pricing-container { grid-template-columns:1fr; }
            .concept-display-image { height: 250px; }
            .concept-display-code .code-value { font-size: 2rem; }
            .services-grid { grid-template-columns: 1fr; }
            .form-row { grid-template-columns: 1fr; }
            .lead-form-container { padding: 2rem; }
            .plan-details { grid-template-columns: 1fr; }
            .plan-title { font-size: 1.5rem; }
            .plan-price { font-size: 2rem; }
            .pricing-card.recommended-glow::before {
                top: -3px;
                left: -3px;
                right: -3px;
                bottom: -3px;
                border-radius: 35px;
            }
        }
        @media(max-width:480px) {
            .form-screen h2 { font-size:2rem; }
            .vibz-btn { width:100%; max-width:280px; }
            .code-input-large { font-size: 1.1rem; padding: 1.2rem; }
            .lead-form-container { padding: 1.5rem; }
            .step-options-large .vibz-btn { min-width: 100%; max-width: 300px; }
        }

        @keyframes fadeIn { 
            from { opacity:0; transform:translateY(20px); } 
            to { opacity:1; transform:translateY(0); } 
        }
    </style>
</head>
<body>

<!-- Header -->
<header id="header">
    <div class="container nav-container">
        <a href="#" class="logo">VIBZ</a>
        <nav class="nav-links">
            <a href="#home">Home</a>
            <a href="#portfolio">Portfolio</a>
            <a href="#process">Process</a>
            <a href="#contact">Contact</a>
        </nav>
        <button class="mobile-menu-btn" id="mobileMenuBtn"><i class="fas fa-bars"></i></button>
    </div>
</header>

<section class="funnel-section">
    <div class="container">
        <!-- Step Indicators - 13 steps total -->
        <div class="step-indicator">
            <div class="step-dot active" data-step="1"></div>
            <div class="step-dot" data-step="2"></div>
            <div class="step-dot" data-step="3"></div>
            <div class="step-dot" data-step="4"></div>
            <div class="step-dot" data-step="5"></div>
            <div class="step-dot" data-step="6"></div>
            <div class="step-dot" data-step="7"></div>
            <div class="step-dot" data-step="8"></div>
            <div class="step-dot" data-step="9"></div>
            <div class="step-dot" data-step="10"></div>
            <div class="step-dot" data-step="11"></div>
            <div class="step-dot" data-step="12"></div>
            <div class="step-dot" data-step="13"></div>
        </div>

        <form id="formWrapper">
            <!-- Hidden fields -->
            <input type="hidden" id="hiddenPlan" name="Selected Plan">
            <input type="hidden" id="hiddenFeatures" name="Selected Features">
            <input type="hidden" id="hiddenPaymentLink" name="Payment Link">
            <input type="hidden" id="hiddenDesignCode" name="Design Code">

            <!-- STEP 1-9: Existing steps (unchanged) -->
            <!-- STEP 1: Barber Shop Name -->
            <div class="form-screen active" id="step-1">
                <h2>What's Your Barber Shop Name?</h2>
                <p>Tell us your barber shop name so we can personalize your experience.</p>
                <input type="text" id="businessInput" placeholder="e.g. The Gentlemen's Cut">
                <button type="button" class="vibz-btn vibz-btn-primary" onclick="handleBusinessName()">Next</button>
            </div>

            <!-- STEP 2: Project Type -->
            <div class="form-screen" id="step-2">
                <h2>Which service do you need?</h2>
                <div class="options">
                    <button type="button" class="vibz-btn" onclick="setProjectType('New Website')">New Website</button>
                    <button type="button" class="vibz-btn" onclick="setProjectType('Redesign Existing')">Redesign Existing</button>
                    <button type="button" class="vibz-btn" onclick="setProjectType('Maintenance')">Maintenance</button>
                </div>
                <button type="button" class="vibz-btn back-button" onclick="prev()">← Go Back</button>
            </div>

            <!-- STEP 3: Design Concept -->
            <div class="form-screen" id="step-3">
                <h2 id="step3Title">Do you have a design concept in mind?</h2>
                <p id="step3Message">You can enter a code, choose from templates, or request custom design.</p>
                
                <!-- Show design info if coming from concepts page -->
                <div id="designInfo" style="display: none; background: rgba(255, 107, 0, 0.1); padding: 1rem; border-radius: 12px; margin-bottom: 1.5rem; border: 2px solid #FF6B00;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <div style="font-size: 1.5rem; color: #FF6B00;">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div>
                            <p style="margin: 0; color: #121212; font-weight: 700; font-size: 1.1rem;">
                                Design Selected: <span id="selectedDesignCode" style="color: #FF6B00;"></span>
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="options">
                    <button type="button" class="vibz-btn" onclick="setDesignConcept('Code')" id="codeBtn">Yes, I have a code</button>
                    <a href="https://www.vibz.co.uk/barber/concepts.html" class="vibz-btn">Show me concepts</a>
                    <button type="button" class="vibz-btn" onclick="setDesignConcept('Custom')">Custom design</button>
                </div>
                <button type="button" class="vibz-btn back-button" onclick="prev()">← Go Back</button>
            </div>

            <!-- STEP 4: Code Input & Concept Display -->
            <div class="form-screen" id="step-4">
                <h2>Enter Your Design Code</h2>
                <p>Type the code for your chosen design (e.g., barber-1, barber-2, etc.)</p>
                
                <div class="code-input-container">
                    <input type="text" 
                           class="code-input-large" 
                           id="designCodeInput" 
                           placeholder="Enter code (e.g., barber-5)"
                           autocomplete="off">
                    
                    <div id="codeStatus" class="code-status"></div>
                    
                    <div id="conceptDisplay" style="display: none;">
                        <div class="concept-display-card">
                            <div class="concept-display-image">
                                <img id="conceptDisplayImage" src="" alt="Design Preview">
                            </div>
                            <div class="concept-display-code">
                                <span class="code-label">Design Code</span>
                                <div class="code-value" id="conceptDisplayCode"></div>
                            </div>
                        </div>
                        
                        <button type="button" class="vibz-btn vibz-btn-primary" onclick="confirmDesignSelection()" id="confirmDesignBtn">
                            Continue with This Design
                        </button>
                    </div>
                    
                    <button type="button" class="vibz-btn" onclick="tryDifferentCode()" id="tryDifferentBtn" style="display: none; margin-top: 1rem;">
                        Try Different Code
                    </button>
                </div>
                
                <div style="margin-top: 2rem;">
                    <p style="color: var(--gray); font-size: 0.9rem;">
                        <i class="fas fa-info-circle"></i> 
                        Accepted formats: "barber-1", "barber 1", "BARBER-1", "B1", or just "1"
                    </p>
                </div>
                
                <button type="button" class="vibz-btn back-button" onclick="prev()">← Go Back</button>
            </div>
            
            <!-- STEP 5: Target Audience -->
            <div class="form-screen" id="step-5">
                <h2>Who are your main clients?</h2>
                <div class="options">
                    <button type="button" class="vibz-btn" onclick="setAudience('Men')">Men</button>
                    <button type="button" class="vibz-btn" onclick="setAudience('Women')">Women</button>
                    <button type="button" class="vibz-btn" onclick="setAudience('Children')">Children</button>
                    <button type="button" class="vibz-btn" onclick="setAudience('Family')">Mixed/Family</button>
                </div>
                <button type="button" class="vibz-btn back-button" onclick="prev()">← Go Back</button>
            </div>

            <!-- STEP 6: Website Style -->
            <div class="form-screen" id="step-6">
                <h2>What style do you prefer for your website?</h2>
                <div class="options">
                    <button type="button" class="vibz-btn" onclick="setStyle('Classic')">Classic</button>
                    <button type="button" class="vibz-btn" onclick="setStyle('Modern')">Modern</button>
                    <button type="button" class="vibz-btn" onclick="setStyle('Minimalist')">Minimalist</button>
                    <button type="button" class="vibz-btn" onclick="setStyle('Premium')">Premium</button>
                </div>
                <button type="button" class="vibz-btn back-button" onclick="prev()">← Go Back</button>
            </div>

            <!-- STEP 7: Color Scheme -->
            <div class="form-screen" id="step-7">
                <h2>Preferred color scheme?</h2>
                <div class="options">
                    <button type="button" class="vibz-btn" onclick="setColor('Black & Gold')">Black & Gold</button>
                    <button type="button" class="vibz-btn" onclick="setColor('Modern/Vibrant')">Modern/Vibrant</button>
                    <button type="button" class="vibz-btn" onclick="setColor('Neutral/Classic')">Neutral/Classic</button>
                    <button type="button" class="vibz-btn" onclick="setColor('Custom')">Custom</button>
                </div>
                <button type="button" class="vibz-btn back-button" onclick="prev()">← Go Back</button>
            </div>

            <!-- STEP 8: Website Goal -->
            <div class="form-screen" id="step-8">
                <h2>What's the main goal of your website?</h2>
                <div class="options">
                    <button type="button" class="vibz-btn" onclick="setGoal('Attract New Clients')">Attract New Clients</button>
                    <button type="button" class="vibz-btn" onclick="setGoal('Showcase Styles/Portfolio')">Showcase Styles/Portfolio</button>
                    <button type="button" class="vibz-btn" onclick="setGoal('Facilitate Bookings')">Facilitate Bookings</button>
                </div>
                <button type="button" class="vibz-btn back-button" onclick="prev()">← Go Back</button>
            </div>

            <!-- STEP 9: Services Selection -->
            <div class="form-screen" id="step-9">
                <h2 id="step9Title">Select Your Website Services</h2>
                <p id="step9Message">Choose the features you need for your barbershop website:</p>
                
                <!-- Plan Summary Cards -->
                <div class="plan-summary-card standard">
                    <div class="plan-header standard">
                        <div class="plan-title standard">STANDARD PLAN</div>
                        <div class="plan-price" style="color: #4CAF50;">£1,500</div>
                    </div>
                    
                    <div class="plan-details">
                        <div class="plan-detail-item standard">
                            <strong><i class="fas fa-file-alt"></i> Upto 5 Pages</strong>
                            Perfect for basic barbershop websites
                        </div>
                        <div class="plan-detail-item standard">
                            <strong><i class="fas fa-sync-alt"></i> Upto 5 Revisions Per Page</strong>
                            Fine-tune each page to perfection
                        </div>
                        <div class="plan-detail-item standard">
                            <strong><i class="fas fa-rocket"></i> Delivery 10 - 15 days</strong>
                            Fast turnaround for standard sites
                        </div>
                        <div class="plan-detail-item standard">
                            <strong><i class="fas fa-headset"></i> 3 months support</strong>
                            Post-launch assistance included
                        </div>
                        <div class="plan-detail-item standard">
                            <strong><i class="fas fa-mobile-alt"></i> Mobile responsive</strong>
                            Works perfectly on all devices
                        </div>
                    </div>
                    
                    <div class="divider">
                        <div class="divider-text">INCLUDED STANDARD FEATURES</div>
                    </div>
                </div>
                
                <div class="plan-summary-card premium">
                    <div class="plan-header premium">
                        <div class="plan-title premium">PREMIUM PLAN</div>
                        <div class="plan-price" style="color: #2196F3;">£3,000</div>
                    </div>
                    
                    <div class="plan-details">
                        <div class="plan-detail-item premium">
                            <strong><i class="fas fa-file-alt"></i> Upto 15 Pages</strong>
                            Comprehensive multi-page websites
                        </div>
                        <div class="plan-detail-item premium">
                            <strong><i class="fas fa-sync-alt"></i> Upto 10 Revisions Per Page</strong>
                            Extensive customization options
                        </div>
                        <div class="plan-detail-item premium">
                            <strong><i class="fas fa-rocket"></i> Delivery 25 - 30 days</strong>
                            More time for advanced features
                        </div>
                        <div class="plan-detail-item premium">
                            <strong><i class="fas fa-headset"></i> 6 months support</strong>
                            Extended post-launch assistance
                        </div>
                        <div class="plan-detail-item premium">
                            <strong><i class="fas fa-mobile-alt"></i> Mobile responsive</strong>
                            Optimized for all mobile devices
                        </div>
                    </div>
                    
                    <div class="divider">
                        <div class="divider-text">INCLUDED PREMIUM FEATURES</div>
                    </div>
                </div>

                <!-- Tier Indicators -->
                <div class="tier-indicators" style="display: flex; justify-content: center; gap: 30px; margin: 2rem 0; flex-wrap: wrap;">
                    <div style="text-align: center; background: rgba(76, 175, 80, 0.1); padding: 10px 20px; border-radius: 10px; border: 2px solid #4CAF50;">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                            <div style="width: 16px; height: 16px; background: #4CAF50; border-radius: 50%;"></div>
                            <span style="font-weight: 700; color: #4CAF50;">STANDARD PACKAGE</span>
                        </div>
                        <span style="font-size: 0.85rem; color: var(--gray);">Professional Web Presence</span>
                    </div>
                    <div style="text-align: center; background: rgba(33, 150, 243, 0.1); padding: 10px 20px; border-radius: 10px; border: 2px solid #2196F3;">
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 5px;">
                            <div style="width: 16px; height: 16px; background: #2196F3; border-radius: 50%;"></div>
                            <span style="font-weight: 700; color: #2196F3;">PREMIUM PACKAGE</span>
                        </div>
                        <span style="font-size: 0.85rem; color: var(--gray);">Revenue-Boosting Features</span>
                    </div>
                </div>
                
                <!-- Services Grid -->
                <div class="services-grid">
                    <!-- ===== STANDARD PACKAGE SERVICES ===== -->
                    <div class="service-card standard" onclick="toggleService('Services & Pricing Display', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #4CAF50; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">S</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Services & Pricing Display</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Clear layout of all offered services and prices</p>
                    </div>
                    
                    <div class="service-card standard" onclick="toggleService('Team / Barber Profiles', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #4CAF50; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">S</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Team / Barber Profiles</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Photos, bios, and specialties</p>
                    </div>
                    
                    <div class="service-card standard" onclick="toggleService('Photo Gallery / Portfolio', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #4CAF50; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">S</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Photo Gallery / Portfolio</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Image grid showcasing barber work</p>
                    </div>
                    
                    <div class="service-card standard" onclick="toggleService('Basic Before & After Slider', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #4CAF50; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">S</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Basic Before & After Slider</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Compare hairstyles side-by-side</p>
                    </div>
                    
                    <div class="service-card standard" onclick="toggleService('Special Offers / Promotions Section', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #4CAF50; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">S</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Special Offers / Promotions Section</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Display deals or discounts</p>
                    </div>
                    
                    <div class="service-card standard" onclick="toggleService('Opening Hours Display', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #4CAF50; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">S</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Opening Hours Display</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Business hours and open/closed status</p>
                    </div>
                    
                    <div class="service-card standard" onclick="toggleService('Location & Directions', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #4CAF50; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">S</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Location & Directions</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Google Maps embed with directions button</p>
                    </div>
                    
                    <div class="service-card standard" onclick="toggleService('Tap-to-Call & WhatsApp Buttons', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #4CAF50; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">S</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Tap-to-Call & WhatsApp Buttons</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">One-click mobile contact</p>
                    </div>
                    
                    <div class="service-card standard" onclick="toggleService('FAQ Section', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #4CAF50; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">S</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">FAQ Section</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Collapsible questions to answer common client queries</p>
                    </div>
                    
                    <div class="service-card standard" onclick="toggleService('Loyalty / Membership Info', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #4CAF50; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">S</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Loyalty / Membership Info</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Show loyalty program details</p>
                    </div>
                    
                    <div class="service-card standard" onclick="toggleService('Contact Form', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #4CAF50; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">S</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Contact Form</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Simple enquiry form to collect messages</p>
                    </div>
                    
                    <div class="service-card standard" onclick="toggleService('On-Page SEO Basics', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #4CAF50; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">S</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">On-Page SEO Basics</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Page titles, headers, meta tags, and image alt text</p>
                    </div>
                    
                    <!-- ===== PREMIUM PACKAGE SERVICES ===== -->
                    <div class="service-card premium" onclick="toggleService('Online Booking System Integration', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #2196F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">P</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Online Booking System Integration</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Calendly, Setmore, etc.</p>
                    </div>
                    
                    <div class="service-card premium" onclick="toggleService('Stripe Payments / Deposits', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #2196F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">P</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Stripe Payments / Deposits</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Accept payments online</p>
                    </div>
                    
                    <div class="service-card premium" onclick="toggleService('Automated Booking Reminders', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #2196F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">P</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Automated Booking Reminders</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Email/SMS via booking platform</p>
                    </div>
                    
                    <div class="service-card premium" onclick="toggleService('Reschedule & Cancellation Management', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #2196F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">P</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Reschedule & Cancellation Management</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Client-managed bookings</p>
                    </div>
                    
                    <div class="service-card premium" onclick="toggleService('Gift Cards / Vouchers', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #2196F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">P</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Gift Cards / Vouchers</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Sell digital gift cards</p>
                    </div>
                    
                    <div class="service-card premium" onclick="toggleService('Walk-In / Waitlist System', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #2196F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">P</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Walk-In / Waitlist System</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Real-time updates for walk-ins</p>
                    </div>
                    
                    <div class="service-card premium" onclick="toggleService('Enhanced Before & After Gallery', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #2196F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">P</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Enhanced Before & After Gallery</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Filter by barber, style, or service</p>
                    </div>
                    
                    <div class="service-card premium" onclick="toggleService('Barber Specialties & Service Tags', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #2196F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">P</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Barber Specialties & Service Tags</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Highlight skills and services</p>
                    </div>
                    
                    <div class="service-card premium" onclick="toggleService('Advanced Call-to-Action Buttons', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #2196F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">P</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Advanced Call-to-Action Buttons</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Sticky buttons, strategic placement</p>
                    </div>
                    
                    <div class="service-card premium" onclick="toggleService('Analytics & Conversion Tracking Setup', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #2196F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">P</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Analytics & Conversion Tracking Setup</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Tracks Book Now, Call, WhatsApp, and form submissions</p>
                    </div>
                    
                    <div class="service-card premium" onclick="toggleService('Priority Build Queue', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #2196F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">P</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Priority Build Queue</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Premium builds scheduled first</p>
                    </div>
                    
                    <div class="service-card premium" onclick="toggleService('Enhanced Video & Image Gallery', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #2196F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">P</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Enhanced Video & Image Gallery</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Interactive gallery for client-provided media</p>
                    </div>
                    
                    <div class="service-card premium" onclick="toggleService('Social Proof / Reviews Section', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #2196F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">P</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Social Proof / Reviews Section</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Display client testimonials</p>
                    </div>
                    
                    <div class="service-card premium" onclick="toggleService('Prominent Sticky Header / Banner', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #2196F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">P</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Prominent Sticky Header / Banner</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Highlight bookings, offers, or CTAs</p>
                    </div>
                    
                    <div class="service-card premium" onclick="toggleService('Multi-Location / Branch Info', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #2196F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">P</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Multi-Location / Branch Info</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Optional for shops with multiple locations</p>
                    </div>
                    
                    <div class="service-card premium" onclick="toggleService('Full Branding Package', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #2196F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">P</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Full Branding Package</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Logo, colors, typography</p>
                    </div>
                    
                    <div class="service-card premium" onclick="toggleService('Custom Graphics & Icons', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #2196F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">P</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Custom Graphics & Icons</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Personalized visuals for website sections</p>
                    </div>
                    
                    <div class="service-card premium" onclick="toggleService('Branded Email Newsletter Setup', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #2196F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">P</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Branded Email Newsletter Setup</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Template ready to connect</p>
                    </div>
                    
                    <div class="service-card premium" onclick="toggleService('Favicon & Browser Branding', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #2196F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">P</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Favicon & Browser Branding</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Polished appearance in tabs/bookmarks</p>
                    </div>
                    
                    <div class="service-card premium" onclick="toggleService('Premium On-Page SEO', this)">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <div style="width: 24px; height: 24px; background: #2196F3; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 700;">P</div>
                            <h4 style="margin: 0; font-size: 1.1rem;">Premium On-Page SEO</h4>
                        </div>
                        <p style="color: var(--gray); font-size: 0.9rem; margin: 0;">Schema, technical setup, optimized indexing</p>
                    </div>
                </div>
                
                <!-- Selection Summary -->
                <div id="selectionSummary" style="background: var(--light-gray); padding: 1.5rem; border-radius: 15px; margin: 2rem 0; border: 2px solid var(--border);">
                    <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                        <div>
                            <h4 style="margin-bottom: 0.5rem;">Your Selections</h4>
                            <div style="display: flex; gap: 2rem; flex-wrap: wrap;">
                                <div>
                                    <span style="font-size: 0.9rem; color: var(--gray);">Standard Services:</span>
                                    <div style="font-weight: 700; color: #4CAF50; font-size: 1.5rem;" id="standardCount">0</div>
                                </div>
                                <div>
                                    <span style="font-size: 0.9rem; color: var(--gray);">Premium Services:</span>
                                    <div style="font-weight: 700; color: #2196F3; font-size: 1.5rem;" id="premiumCount">0</div>
                                </div>
                                <div>
                                    <span style="font-size: 0.9rem; color: var(--gray);">Total Selected:</span>
                                    <div style="font-weight: 700; color: var(--dark); font-size: 1.5rem;" id="totalCount">0</div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div id="planRecommendationPreview" style="background: linear-gradient(90deg, #2196F3, #21CBF3); color: white; padding: 0.8rem 1.5rem; border-radius: 25px; font-weight: 700; display: none; box-shadow: 0 5px 15px rgba(33, 150, 243, 0.3);">
                                <i class="fas fa-star"></i> Recommended: <span id="recommendedPlanPreview">Premium</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Plan Recommendation Logic -->
                    <div id="planLogicInfo" style="margin-top: 1rem; padding: 1rem; background: rgba(33, 150, 243, 0.05); border-radius: 10px; display: none;">
                        <p style="margin: 0; font-size: 0.9rem; color: var(--gray);">
                            <i class="fas fa-info-circle" style="color: #2196F3;"></i>
                            <strong>Selection Logic:</strong> 
                            <span id="planLogicText">Select 1+ Premium service for Premium recommendation</span>
                        </p>
                    </div>
                    
                    <div id="selectedServicesList" style="margin-top: 1rem; display: none;">
                        <p style="font-size: 0.9rem; color: var(--gray); margin-bottom: 0.5rem;">Selected Services:</p>
                        <div id="servicesList" style="display: flex; flex-wrap: wrap; gap: 0.5rem;"></div>
                    </div>
                </div>
                
                <button type="button" class="vibz-btn vibz-btn-primary" onclick="nextFromServices()" style="margin-top: 1rem; padding: 1.2rem 3rem; font-size: 1.1rem;">
                    <i class="fas fa-arrow-right"></i> Continue
                </button>
                
                <button type="button" class="vibz-btn back-button" onclick="prev()">← Go Back</button>
            </div>

            <!-- STEP 10: ONLY THE URGENCY QUESTION -->
            <div class="form-screen" id="step-10">
                <h2>What would you like to do next?</h2>
                <p>Help us understand your timeline and preference:</p>
                
                <div class="step-options-large">
                    <button type="button" class="vibz-btn" onclick="setUrgency('Start ASAP')">
                        <i class="fas fa-bolt"></i> I want to start my website ASAP
                    </button>
                    <button type="button" class="vibz-btn" onclick="setUrgency('More Info')">
                        <i class="fas fa-info-circle"></i> I need more information
                    </button>
                </div>
                
                <button type="button" class="vibz-btn back-button" onclick="prev()">← Go Back</button>
            </div>

            <!-- STEP 11: ONLY THE OWNERSHIP MODEL QUESTION -->
            <div class="form-screen" id="step-11">
                <h2>How would you like to pay for your website?</h2>
                <p>Do you want to own the website outright or prefer monthly support including hosting and maintenance?</p>
                
                <div class="step-options-large">
                    <button type="button" class="vibz-btn" onclick="setPlanModel('Own Outright')">
                        <i class="fas fa-crown"></i> Own Outright
                        <div style="font-size: 0.9rem; margin-top: 0.5rem; font-weight: 500; color: var(--gray);">
                            One-time payment • Full ownership
                        </div>
                    </button>
                    <button type="button" class="vibz-btn" onclick="setPlanModel('Monthly Support')">
                        <i class="fas fa-calendar-alt"></i> Monthly Support
                        <div style="font-size: 0.9rem; margin-top: 0.5rem; font-weight: 500; color: var(--gray);">
                            Monthly subscription • All-inclusive
                        </div>
                    </button>
                </div>
                
                <button type="button" class="vibz-btn back-button" onclick="prev()">← Go Back</button>
            </div>

            <!-- STEP 12: Lead Capture Form (for "I need more info") -->
            <div class="form-screen" id="step-12">
                <h2>Get More Information</h2>
                <p>Fill out the form below and we'll contact you with detailed information about our services and pricing.</p>
                
                <div class="lead-form-container">
                    <form id="leadCaptureForm" onsubmit="submitLeadForm(event)">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="leadName">Full Name *</label>
                                <input type="text" id="leadName" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="leadEmail">Email Address *</label>
                                <input type="email" id="leadEmail" name="email" required>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="leadPhone">Phone Number *</label>
                                <input type="tel" id="leadPhone" name="phone" required>
                            </div>
                            <div class="form-group">
                                <label for="leadBusiness">Business Name</label>
                                <input type="text" id="leadBusiness" name="business" value="${formData.businessName || ''}">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="leadLocation">Barbershop Location (City)</label>
                            <input type="text" id="leadLocation" name="location" placeholder="e.g., London, Manchester">
                        </div>
                        
                        <div class="form-group">
                            <label for="leadTimeline">When are you looking to start? *</label>
                            <select id="leadTimeline" name="timeline" required>
                                <option value="">Select timeline</option>
                                <option value="ASAP">Immediately (ASAP)</option>
                                <option value="1-2 weeks">Within 1-2 weeks</option>
                                <option value="1 month">Within 1 month</option>
                                <option value="2-3 months">Within 2-3 months</option>
                                <option value="Just exploring">Just exploring options</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="leadBudget">Estimated Budget</label>
                            <select id="leadBudget" name="budget">
                                <option value="">Select budget range</option>
                                <option value="Under £1,000">Under £1,000</option>
                                <option value="£1,000 - £2,000">£1,000 - £2,000</option>
                                <option value="£2,000 - £3,000">£2,000 - £3,000</option>
                                <option value="£3,000+">£3,000+</option>
                                <option value="Monthly subscription">Monthly subscription preferred</option>
                                <option value="Not sure">Not sure yet</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="leadQuestions">Specific Questions or Requirements</label>
                            <textarea id="leadQuestions" name="questions" placeholder="Tell us about your specific needs, questions, or any requirements you have..."></textarea>
                        </div>
                        
                        <div class="form-note">
                            <i class="fas fa-info-circle"></i> We'll contact you within 24 hours to discuss your project.
                        </div>
                        
                        <button type="submit" class="submit-btn">
                            <i class="fas fa-paper-plane"></i> Send My Information
                        </button>
                    </form>
                </div>
                
                <button type="button" class="vibz-btn back-button" onclick="goBackToStep10()">← Go Back</button>
            </div>

            <!-- STEP 13: Show Plans (for "Start ASAP" users) -->
            <div class="form-screen" id="step-13">
                <h2>Your Recommended Plan</h2>
                <p id="planRecommendation">Based on your selections, here's what we recommend:</p>
                <div class="pricing-container" id="pricingCards">
                    <!-- Plans will be shown here based on Own Outright vs Monthly Support -->
                </div>
                <button type="button" class="vibz-btn back-button" onclick="prev()">← Go Back</button>
            </div>
        </form>
    </div>
</section>

<script>
// ========== BARBER CONCEPTS DATABASE ==========
const barberConcepts = [
    { code: "barber-1", image: "https://images.unsplash.com/photo-1585747860715-2ba37e788b70?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80" },
    { code: "barber-2", image: "https://images.unsplash.com/photo-1599351431202-1e0f0137899a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80" },
    { code: "barber-3", image: "https://images.unsplash.com/photo-1567894340315-735d7c361db0?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80" },
    { code: "barber-4", image: "https://images.unsplash.com/photo-1596462502278-27bfdc403348?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80" },
    { code: "barber-5", image: "https://images.unsplash.com/photo-1562157873-818bc0726f68?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80" },
    { code: "barber-6", image: "https://images.unsplash.com/photo-1580618864180-f6d7d39b8ff6?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80" },
    { code: "barber-7", image: "https://images.unsplash.com/photo-1621605815972-f9e5c6c4a9c4?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80" },
    { code: "barber-8", image: "https://images.unsplash.com/photo-1599351431202-1e0f0137899a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80" },
    { code: "barber-9", image: "https://images.unsplash.com/photo-1580618864180-f6d7d39b8ff6?ixlib=rb-1.2.1&auto=format&fit=crop&w=1600&q=80" }
];

// ========== SERVICES DATABASE ==========
const allServices = [
    // ===== STANDARD TIER SERVICES =====
    { name: 'Services & Pricing Display', tier: 'standard', description: 'Clear layout of all offered services and prices' },
    { name: 'Team / Barber Profiles', tier: 'standard', description: 'Photos, bios, and specialties' },
    { name: 'Photo Gallery / Portfolio', tier: 'standard', description: 'Image grid showcasing barber work' },
    { name: 'Basic Before & After Slider', tier: 'standard', description: 'Compare hairstyles side-by-side' },
    { name: 'Special Offers / Promotions Section', tier: 'standard', description: 'Display deals or discounts' },
    { name: 'Opening Hours Display', tier: 'standard', description: 'Business hours and open/closed status' },
    { name: 'Location & Directions', tier: 'standard', description: 'Google Maps embed with directions button' },
    { name: 'Tap-to-Call & WhatsApp Buttons', tier: 'standard', description: 'One-click mobile contact' },
    { name: 'FAQ Section', tier: 'standard', description: 'Collapsible questions to answer common client queries' },
    { name: 'Loyalty / Membership Info', tier: 'standard', description: 'Show loyalty program details' },
    { name: 'Contact Form', tier: 'standard', description: 'Simple enquiry form to collect messages' },
    { name: 'On-Page SEO Basics', tier: 'standard', description: 'Page titles, headers, meta tags, and image alt text' },
    
    // ===== PREMIUM TIER SERVICES =====
    { name: 'Online Booking System Integration', tier: 'premium', description: 'Calendly, Setmore, etc.' },
    { name: 'Stripe Payments / Deposits', tier: 'premium', description: 'Accept payments online' },
    { name: 'Automated Booking Reminders', tier: 'premium', description: 'Email/SMS via booking platform' },
    { name: 'Reschedule & Cancellation Management', tier: 'premium', description: 'Client-managed bookings' },
    { name: 'Gift Cards / Vouchers', tier: 'premium', description: 'Sell digital gift cards' },
    { name: 'Walk-In / Waitlist System', tier: 'premium', description: 'Real-time updates for walk-ins' },
    { name: 'Enhanced Before & After Gallery', tier: 'premium', description: 'Filter by barber, style, or service' },
    { name: 'Barber Specialties & Service Tags', tier: 'premium', description: 'Highlight skills and services' },
    { name: 'Advanced Call-to-Action Buttons', tier: 'premium', description: 'Sticky buttons, strategic placement' },
    { name: 'Analytics & Conversion Tracking Setup', tier: 'premium', description: 'Tracks Book Now, Call, WhatsApp, and form submissions' },
    { name: 'Priority Build Queue', tier: 'premium', description: 'Premium builds scheduled first' },
    { name: 'Enhanced Video & Image Gallery', tier: 'premium', description: 'Interactive gallery for client-provided media' },
    { name: 'Social Proof / Reviews Section', tier: 'premium', description: 'Display client testimonials' },
    { name: 'Prominent Sticky Header / Banner', tier: 'premium', description: 'Highlight bookings, offers, or CTAs' },
    { name: 'Multi-Location / Branch Info', tier: 'premium', description: 'Optional for shops with multiple locations' },
    { name: 'Full Branding Package', tier: 'premium', description: 'Logo, colors, typography' },
    { name: 'Custom Graphics & Icons', tier: 'premium', description: 'Personalized visuals for website sections' },
    { name: 'Branded Email Newsletter Setup', tier: 'premium', description: 'Template ready to connect' },
    { name: 'Favicon & Browser Branding', tier: 'premium', description: 'Polished appearance in tabs/bookmarks' },
    { name: 'Premium On-Page SEO', tier: 'premium', description: 'Schema, technical setup, optimized indexing' }
];

// ========== FORM STATE MANAGEMENT ==========
let currentStep = 1;
const formData = {
    businessName: '',
    projectType: '',
    designConcept: '',
    designCode: '',
    features: [],
    audience: '',
    style: '',
    color: '',
    goal: '',
    urgency: '', // 'Start ASAP' or 'More Info'
    planModel: '', // 'Own Outright' or 'Monthly Support'
    planType: '' // 'Standard' or 'Premium' based on service selections
};

// Service selection tracking
let premiumServiceCount = 0;
let standardServiceCount = 0;
let recommendedPlan = { type: '', glow: false };

// DOM elements
const screens = document.querySelectorAll('.form-screen');
const stepDots = document.querySelectorAll('.step-dot');
const businessInput = document.getElementById('businessInput');
const designCodeInput = document.getElementById('designCodeInput');
const codeStatus = document.getElementById('codeStatus');
const conceptDisplay = document.getElementById('conceptDisplay');
const conceptDisplayImage = document.getElementById('conceptDisplayImage');
const conceptDisplayCode = document.getElementById('conceptDisplayCode');
const confirmDesignBtn = document.getElementById('confirmDesignBtn');
const tryDifferentBtn = document.getElementById('tryDifferentBtn');

// ========== UPDATED FUNNEL LOGIC ==========

// STEP 10: Set urgency preference
function setUrgency(urgency) {
    formData.urgency = urgency;
    
    if (urgency === 'Start ASAP') {
        // If user wants to start ASAP, go to step 11 (ownership model question)
        currentStep = 11;
        updateStepIndicator();
    } else if (urgency === 'More Info') {
        // If user needs more info, go to lead capture form (step 12)
        currentStep = 12; // Step 12 is lead capture form
        updateStepIndicator();
    }
}

// STEP 11: Set plan model (ownership question)
function setPlanModel(planModel) {
    formData.planModel = planModel;
    
    // After selecting plan model, go to final plan selection (step 13)
    currentStep = 13;
    updateStepIndicator();
}

// Go back from lead capture form to step 10
function goBackToStep10() {
    currentStep = 10;
    updateStepIndicator();
}

// Submit lead capture form
function submitLeadForm(event) {
    event.preventDefault();
    
    // Get form data
    const leadData = {
        name: document.getElementById('leadName').value,
        email: document.getElementById('leadEmail').value,
        phone: document.getElementById('leadPhone').value,
        business: document.getElementById('leadBusiness').value || formData.businessName,
        location: document.getElementById('leadLocation').value,
        timeline: document.getElementById('leadTimeline').value,
        budget: document.getElementById('leadBudget').value,
        questions: document.getElementById('leadQuestions').value,
        // Include all previous funnel data
        ...formData
    };
    
    // In a real implementation, you would send this data to your server
    console.log('Lead data submitted:', leadData);
    
    // Show success message
    const formContainer = document.querySelector('.lead-form-container');
    formContainer.innerHTML = `
        <div class="success-message">
            <div style="font-size: 4rem; color: #FF6B00; margin-bottom: 1rem;">
                <i class="fas fa-check-circle"></i>
            </div>
            <h3>Thank You!</h3>
            <p>Your information has been received. We'll contact you within 24 hours to discuss your project.</p>
            <p style="margin-top: 1rem; font-size: 0.9rem; color: var(--gray);">
                You'll also receive a copy of this information via email.
            </p>
            <button type="button" class="vibz-btn vibz-btn-primary" onclick="goBackToStep10()" style="margin-top: 2rem;">
                Return to Funnel
            </button>
        </div>
    `;
    
    // Here you would typically send the data to your backend
    // Example: fetch('/api/lead', { method: 'POST', body: JSON.stringify(leadData) })
}

// ========== EXISTING FUNCTIONS (unchanged) ==========

// Normalize code input
function normalizeCode(input) {
    if (!input) return '';
    
    let normalized = input.toString().toLowerCase().trim();
    normalized = normalized.replace(/^barber[\s\-]*/i, '');
    normalized = normalized.replace(/[^0-9\-]/g, '');
    
    if (/^\d+$/.test(normalized)) {
        return `barber-${normalized}`;
    }
    
    if (normalized.includes('-')) {
        const num = normalized.split('-').pop();
        if (/^\d+$/.test(num)) {
            return `barber-${num}`;
        }
    }
    
    return '';
}

// Find concept by code
function findConceptByCode(input) {
    const normalizedCode = normalizeCode(input);
    if (!normalizedCode) return null;
    
    return barberConcepts.find(concept => concept.code === normalizedCode);
}

// Validate and display concept
function validateAndDisplayConcept() {
    const input = designCodeInput.value.trim();
    
    if (!input) {
        codeStatus.textContent = '';
        codeStatus.className = 'code-status';
        conceptDisplay.style.display = 'none';
        tryDifferentBtn.style.display = 'none';
        return;
    }
    
    const concept = findConceptByCode(input);
    
    if (concept) {
        codeStatus.textContent = `✓ Valid code: ${concept.code}`;
        codeStatus.className = 'code-status success';
        conceptDisplayImage.src = concept.image;
        conceptDisplayImage.alt = `Design ${concept.code}`;
        conceptDisplayCode.textContent = concept.code.toUpperCase();
        conceptDisplay.style.display = 'block';
        confirmDesignBtn.innerHTML = `<i class="fas fa-check"></i> Continue with ${concept.code.toUpperCase()}`;
        tryDifferentBtn.style.display = 'inline-block';
    } else {
        codeStatus.textContent = `✗ Design not found. Try "barber-1" to "barber-${barberConcepts.length}"`;
        codeStatus.className = 'code-status error';
        conceptDisplay.style.display = 'none';
        tryDifferentBtn.style.display = 'none';
    }
}

// Confirm design selection
function confirmDesignSelection() {
    const input = designCodeInput.value.trim();
    const concept = findConceptByCode(input);
    
    if (concept) {
        formData.designCode = concept.code;
        formData.designConcept = 'From Code';
        updateHiddenFields();
        next();
    }
}

// Try different code
function tryDifferentCode() {
    designCodeInput.value = '';
    designCodeInput.focus();
    codeStatus.textContent = '';
    codeStatus.className = 'code-status';
    conceptDisplay.style.display = 'none';
    tryDifferentBtn.style.display = 'none';
}

function toggleService(serviceName, element) {
    const index = formData.features.indexOf(serviceName);
    const service = allServices.find(s => s.name === serviceName);
    
    if (index === -1) {
        // Add service
        formData.features.push(serviceName);
        element.classList.add('selected');
    } else {
        // Remove service
        formData.features.splice(index, 1);
        element.classList.remove('selected');
    }
    
    updateServiceCounters();
    calculateRecommendedPlan();
    showPlanRecommendation();
}

function updateServiceCounters() {
    // Reset counts
    standardServiceCount = 0;
    premiumServiceCount = 0;
    
    // Count services by tier
    formData.features.forEach(feature => {
        const service = allServices.find(s => s.name === feature);
        if (service) {
            if (service.tier === 'standard') {
                standardServiceCount++;
            } else {
                premiumServiceCount++;
            }
        }
    });
    
    // Update counters
    document.getElementById('standardCount').textContent = standardServiceCount;
    document.getElementById('premiumCount').textContent = premiumServiceCount;
    document.getElementById('totalCount').textContent = formData.features.length;
    
    // Update services list
    const servicesList = document.getElementById('servicesList');
    servicesList.innerHTML = '';
    
    if (formData.features.length > 0) {
        document.getElementById('selectedServicesList').style.display = 'block';
        formData.features.forEach(service => {
            const serviceData = allServices.find(s => s.name === service);
            const badge = document.createElement('div');
            badge.style.background = serviceData.tier === 'standard' ? '#4CAF50' : '#2196F3';
            badge.style.color = 'white';
            badge.style.padding = '0.3rem 0.8rem';
            badge.style.borderRadius = '20px';
            badge.style.fontSize = '0.8rem';
            badge.style.display = 'flex';
            badge.style.alignItems = 'center';
            badge.style.gap = '5px';
            badge.innerHTML = `<span>${service}</span> <i class="fas fa-times" style="cursor:pointer;" onclick="removeService('${service}')"></i>`;
            servicesList.appendChild(badge);
        });
    } else {
        document.getElementById('selectedServicesList').style.display = 'none';
    }
}

function removeService(serviceName) {
    const index = formData.features.indexOf(serviceName);
    if (index !== -1) {
        formData.features.splice(index, 1);
        
        // Update visual state of the card
        const serviceCards = document.querySelectorAll('.service-card');
        serviceCards.forEach(card => {
            const h4 = card.querySelector('h4');
            if (h4 && h4.textContent === serviceName) {
                card.classList.remove('selected');
            }
        });
        
        updateServiceCounters();
        calculateRecommendedPlan();
        showPlanRecommendation();
    }
}

function calculateRecommendedPlan() {
    // Determine recommendation (Premium if 1+ premium services selected)
    if (premiumServiceCount >= 1) {
        recommendedPlan.type = 'Premium';
        recommendedPlan.glow = true;
    } else {
        recommendedPlan.type = 'Standard';
        recommendedPlan.glow = (formData.features.length > 0);
    }
    
    return recommendedPlan;
}

function showPlanRecommendation() {
    const recommendation = calculateRecommendedPlan();
    const preview = document.getElementById('planRecommendationPreview');
    const logicInfo = document.getElementById('planLogicInfo');
    
    if (formData.features.length > 0) {
        logicInfo.style.display = 'block';
        
        if (recommendation.type === 'Premium') {
            document.getElementById('planLogicText').textContent = 
                `You selected ${premiumServiceCount} premium service(s) (1+ triggers Premium recommendation)`;
            preview.style.display = 'inline-block';
            preview.style.background = 'linear-gradient(90deg, #2196F3, #21CBF3)';
            document.getElementById('recommendedPlanPreview').textContent = 'Premium Plan';
        } else {
            document.getElementById('planLogicText').textContent = 
                `You selected ${standardServiceCount} standard service(s) (Standard plan recommended)`;
            
            if (recommendation.glow) {
                preview.style.display = 'inline-block';
                preview.style.background = 'linear-gradient(90deg, #4CAF50, #66BB6A)';
                document.getElementById('recommendedPlanPreview').textContent = 'Standard Plan';
            } else {
                preview.style.display = 'none';
            }
        }
    } else {
        preview.style.display = 'none';
        logicInfo.style.display = 'none';
    }
}

function nextFromServices() {
    // Check if at least one service is selected
    if (formData.features.length === 0) {
        alert('Please select at least one service to continue.');
        return;
    }
    
    // Store recommended plan for later use
    formData.planType = recommendedPlan.type;
    localStorage.setItem('recommendedPlan', JSON.stringify(recommendedPlan));
    next();
}

// ========== FUNNEL NAVIGATION ==========

// Check URL parameters and jump to correct step
function checkURLParams() {
    const params = new URLSearchParams(window.location.search);
    const step = params.get('step');
    const concept = params.get('concept');
    
    console.log('URL Params:', { step, concept });
    
    if (step) {
        const stepNum = parseInt(step);
        if (!isNaN(stepNum) && stepNum >= 1 && stepNum <= 13) {
            currentStep = stepNum;
            console.log('Jumping to step:', currentStep);
            
            if (concept) {
                const foundConcept = findConceptByCode(concept);
                if (foundConcept) {
                    formData.designCode = foundConcept.code;
                    formData.designConcept = 'From Concepts';
                    localStorage.setItem('selectedDesignCode', foundConcept.code);
                }
            }
            
            return true;
        }
    }
    
    const savedDesignCode = localStorage.getItem('selectedDesignCode');
    if (savedDesignCode) {
        formData.designCode = savedDesignCode;
        formData.designConcept = 'From Concepts';
    }
    
    return false;
}

// Show a specific screen
function showScreen(screenId) {
    screens.forEach(screen => screen.classList.remove('active'));
    const screen = document.getElementById(screenId);
    if (screen) {
        screen.classList.add('active');
        
        // Update UI for specific steps
        if (screenId === 'step-3' && formData.designCode) {
            document.getElementById('designInfo').style.display = 'block';
            document.getElementById('selectedDesignCode').textContent = formData.designCode.toUpperCase();
        }
        
        if (screenId === 'step-9') {
            // Update title with business name if available
            if (formData.businessName) {
                document.getElementById('step9Title').innerHTML = 
                    `Select Services for <span style="color: #FF6B00;">${formData.businessName}</span>`;
            }
            
            // Update service counters
            updateServiceCounters();
            showPlanRecommendation();
        }
        
        if (screenId === 'step-13') {
            // Show plans based on selections
            showFinalPlans();
        }
        
        // Auto-focus code input on step 4
        if (screenId === 'step-4') {
            setTimeout(() => {
                designCodeInput.focus();
                
                if (formData.designCode) {
                    designCodeInput.value = formData.designCode;
                    validateAndDisplayConcept();
                }
            }, 100);
        }
    }
}

// Step navigation
function next() {
    if (currentStep < 13) {
        currentStep++;
        updateStepIndicator();
    }
}

function prev() {
    if (currentStep > 1) {
        currentStep--;
        updateStepIndicator();
    }
}

function updateStepIndicator() {
    stepDots.forEach((dot, index) => {
        dot.classList.toggle('active', index < currentStep);
    });
    
    showScreen('step-' + currentStep);
    updateHiddenFields();
}

// Update hidden form fields
function updateHiddenFields() {
    document.getElementById('hiddenDesignCode').value = formData.designCode || '';
    document.getElementById('hiddenFeatures').value = formData.features.join(', ');
}

// STEP 1: Handle business name input
function handleBusinessName() {
    const value = businessInput.value.trim();
    if (value) {
        formData.businessName = value;
        next();
    } else {
        alert('Please enter your barber shop name');
        businessInput.focus();
    }
}

// STEP 2: Project type selection
function setProjectType(type) {
    formData.projectType = type;
    next();
}

// STEP 3: Design Concept
function setDesignConcept(option) {
    formData.designConcept = option;
    
    if (option === 'Code') {
        next();
    } else if (option === 'Custom') {
        formData.designCode = 'CUSTOM';
        next();
    }
}

// STEP 5-8: Simple selection functions
function setAudience(audience) {
    formData.audience = audience;
    next();
}

function setStyle(style) {
    formData.style = style;
    next();
}

function setColor(color) {
    formData.color = color;
    next();
}

function setGoal(goal) {
    formData.goal = goal;
    next();
}

// STEP 13: Show final plans based on selections
function showFinalPlans() {
    const container = document.getElementById('pricingCards');
    const planText = document.getElementById('planRecommendation');
    
    // Determine pricing based on plan model
    const isOwnOutright = formData.planModel === 'Own Outright';
    const standardPrice = isOwnOutright ? '£1,500' : '£100';
    const premiumPrice = isOwnOutright ? '£3,000' : '£150';
    const period = isOwnOutright ? 'one-time' : 'per month';
    const planNameSuffix = isOwnOutright ? 'Own Outright' : 'Monthly Support';
    
    // Update plan recommendation text
    const recommendation = calculateRecommendedPlan();
    planText.innerHTML = `Based on your <strong>${formData.features.length} selected services</strong>, we recommend the <strong>${recommendation.type}</strong> plan.`;
    
    // Get selected services
    const selectedStandardServices = formData.features.filter(f => 
        allServices.find(s => s.name === f && s.tier === 'standard')
    );
    
    const selectedPremiumServices = formData.features.filter(f => 
        allServices.find(s => s.name === f && s.tier === 'premium')
    );
    
    // Create plan objects with static features (NO ICONS)
    const staticStandardFeatures = [
        'Upto 5 Pages',
        'Upto 5 Revisions Per Page',
        'Delivery 10 - 15 days',
        '3 months support',
        'Mobile responsive'
    ];
    
    const staticPremiumFeatures = [
        'Upto 15 Pages',
        'Upto 10 Revisions Per Page',
        'Delivery 25 - 30 days',
        '6 months support',
        'Mobile responsive'
    ];
    
    // Create HTML for Standard plan - ONLY shows standard services
    let standardFeaturesHtml = '';
    staticStandardFeatures.forEach(feature => {
        standardFeaturesHtml += `<li class="standard-feature">${feature}</li>`;
    });
    
    // Add selected standard services ONLY to Standard plan
    if (selectedStandardServices.length > 0) {
        standardFeaturesHtml += '<li><strong>Selected Standard Services:</strong></li>';
        selectedStandardServices.forEach(service => {
            standardFeaturesHtml += `<li class="standard-feature">• ${service}</li>`;
        });
    }
    
    // Create HTML for Premium plan - ONLY shows premium services
    let premiumFeaturesHtml = '';
    staticPremiumFeatures.forEach(feature => {
        premiumFeaturesHtml += `<li class="premium-feature">${feature}</li>`;
    });
    
    // Add selected premium services ONLY to Premium plan
    if (selectedPremiumServices.length > 0) {
        premiumFeaturesHtml += '<li><strong>Selected Premium Services:</strong></li>';
        selectedPremiumServices.forEach(service => {
            premiumFeaturesHtml += `<li class="premium-feature">• ${service}</li>`;
        });
    }
    
    // Add selected features section (shows all selected features)
    let selectedFeaturesSection = '';
    if (formData.features.length > 0) {
        selectedFeaturesSection = `
            <div class="selected-features-section">
                <h4><i class="fas fa-check-circle" style="color: #FF6B00;"></i> Your Selected Features (${formData.features.length})</h4>
                <div class="selected-features-list">
                    ${formData.features.map(feature => {
                        const service = allServices.find(s => s.name === feature);
                        const tierClass = service.tier === 'standard' ? 'standard' : 'premium';
                        return `<div class="selected-feature-badge ${tierClass}">${feature}</div>`;
                    }).join('')}
                </div>
            </div>
        `;
    }
    
    container.innerHTML = `
        <div class="pricing-card ${recommendation.type === 'Standard' && recommendation.glow ? 'recommended-glow' : ''}" 
             id="recommendedStandard">
            <h3>${planNameSuffix} - Standard</h3>
            <div class="price">${standardPrice}<span class="price-period">/${period}</span></div>
            <ul class="pricing-features">${standardFeaturesHtml}</ul>
            ${selectedFeaturesSection}
            <button type="button" class="vibz-btn ${recommendation.type === 'Standard' ? 'vibz-btn-primary' : ''}" 
                    onclick="goToPayment('${planNameSuffix} - Standard')">
                ${recommendation.type === 'Standard' ? 'Choose Recommended Plan' : 'Choose Standard Plan'}
            </button>
        </div>
        
        <div class="pricing-card ${recommendation.type === 'Premium' && recommendation.glow ? 'recommended-glow' : ''}" 
             id="recommendedPremium">
            <h3>${planNameSuffix} - Premium</h3>
            <div class="price">${premiumPrice}<span class="price-period">/${period}</span></div>
            <ul class="pricing-features">${premiumFeaturesHtml}</ul>
            ${selectedFeaturesSection}
            <button type="button" class="vibz-btn ${recommendation.type === 'Premium' ? 'vibz-btn-primary' : ''}" 
                    style="${recommendation.type === 'Premium' ? '' : 'background: #2196F3; border-color: #2196F3; color: white;'}"
                    onclick="goToPayment('${planNameSuffix} - Premium')">
                ${recommendation.type === 'Premium' ? 'Choose Recommended Plan' : 'Choose Premium Plan'}
            </button>
        </div>
    `;
}

// Redirect to payment page
function goToPayment(planName) {
    // Store all form data before redirecting
    localStorage.setItem('funnelFormData', JSON.stringify(formData));
    localStorage.setItem('selectedPlan', planName);
    
    // Determine payment link based on plan
    let paymentLink;
    if (planName.includes('Own Outright')) {
        if (planName.includes('Standard')) {
            paymentLink = 'https://buy.stripe.com/test_00g9CBeBea4X6Gg28b'; // £1,500
        } else {
            paymentLink = 'https://buy.stripe.com/test_28odSBdBCgVn7Z2fZ1'; // £3,000
        }
    } else {
        if (planName.includes('Standard')) {
            paymentLink = 'https://buy.stripe.com/test_00g9CBeBea4X6Gg28b'; // £100/month
        } else {
            paymentLink = 'https://buy.stripe.com/test_28odSBdBCgVn7Z2fZ1'; // £150/month
        }
    }
    
    window.location.href = paymentLink;
}

// ========== INITIALIZATION ==========

// Initialize page
document.addEventListener('DOMContentLoaded', () => {
    const jumpedFromURL = checkURLParams();
    updateStepIndicator();
    
    // Mobile menu toggle
    const mobileBtn = document.getElementById('mobileMenuBtn');
    if (mobileBtn) {
        mobileBtn.addEventListener('click', () => {
            const navLinks = document.querySelector('.nav-links');
            navLinks.style.display = navLinks.style.display === 'flex' ? 'none' : 'flex';
        });
    }
    
    // Auto-focus business input if on step 1
    if (currentStep === 1 && businessInput) {
        businessInput.focus();
    }
    
    // Code input validation on typing
    designCodeInput.addEventListener('input', validateAndDisplayConcept);
    
    // Allow Enter key to confirm design
    designCodeInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            const input = designCodeInput.value.trim();
            const concept = findConceptByCode(input);
            if (concept) {
                confirmDesignSelection();
            }
        }
    });
    
    console.log('Available barber concepts:', barberConcepts.map(c => c.code));
});
</script>

</body>
</html>
